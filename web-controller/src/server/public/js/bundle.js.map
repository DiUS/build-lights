{"version":3,"file":null,"sources":["../../../client/sam/actions.js","../../../client/sam/view.js","../../../client/sam/state.js","../../../../node_modules/socket.io-client/node_modules/ms/index.js","../../../../node_modules/socket.io-client/lib/url.js","../../../../node_modules/ms/index.js","../../../../node_modules/component-emitter/index.js","../../../../node_modules/socket.io-parser/is-buffer.js","../../../../node_modules/engine.io-client/node_modules/ms/index.js","../../../../node_modules/has-binary/index.js","../../../../node_modules/after/index.js","../../../../node_modules/blob/index.js","../../../../node_modules/engine.io-client/lib/transport.js","../../../../node_modules/yeast/index.js","../../../../node_modules/engine.io-client/lib/transports/polling.js","../../../../node_modules/engine.io-client/lib/transports/polling-xhr.js","../../../../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../../../../node_modules/engine.io-client/lib/transports/websocket.js","../../../../node_modules/engine.io-client/lib/transports/index.js","../../../../node_modules/engine.io-client/lib/socket.js","../../../../node_modules/to-array/index.js","../../../../node_modules/socket.io-client/lib/on.js","../../../../node_modules/backo2/index.js","../../../../node_modules/socket.io-client/lib/manager.js","../../../../node_modules/inferno/dist/inferno-dom.js","../../../../node_modules/inferno-dom/inferno-dom.js","../../../../node_modules/inferno/dist/inferno.js","../../../../node_modules/inferno/inferno.js","../../../client/components/Alert.js","../../../client/components/TabItem.js","../../../client/components/utils.js","../../../client/components/CiTabContent.js","../../../client/components/Job.js","../../../client/components/JobsTabContent.js","../../../client/components/NetworkTabContent.js","../../../client/components/LedHardwareTabContent.js","../../../client/components/TabContent.js","../../../client/components/Tab.js","../../../client/components/Header.js","../../../client/components/Footer.js","../../../client/components/Intermission.js","../../../client/components/Main.js","../../../../node_modules/parseuri/index.js","../../../../node_modules/socket.io-client/node_modules/debug/debug.js","../../../../node_modules/socket.io-client/node_modules/debug/browser.js","../../../../node_modules/debug/debug.js","../../../../node_modules/debug/browser.js","../../../../node_modules/json3/lib/json3.js","../../../../node_modules/isarray/index.js","../../../../node_modules/socket.io-parser/binary.js","../../../../node_modules/socket.io-parser/index.js","../../../../node_modules/engine.io-client/node_modules/component-emitter/index.js","../../../../node_modules/engine.io-client/node_modules/debug/debug.js","../../../../node_modules/engine.io-client/node_modules/debug/browser.js","../../../../node_modules/indexof/index.js","../../../../node_modules/parsejson/index.js","../../../../node_modules/parseqs/index.js","../../../../node_modules/engine.io-parser/lib/keys.js","../../../../node_modules/arraybuffer.slice/index.js","../../../../node_modules/wtf-8/wtf-8.js","../../../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../../../node_modules/engine.io-parser/lib/browser.js","../../../../node_modules/has-cors/index.js","../../../../node_modules/engine.io-client/lib/xmlhttprequest.js","../../../../node_modules/component-inherit/index.js","../../../../node_modules/rollup-plugin-node-resolve/src/empty.js","../../../../node_modules/engine.io-client/lib/index.js","../../../../node_modules/engine.io-client/index.js","../../../../node_modules/socket.io-client/node_modules/component-emitter/index.js","../../../../node_modules/component-bind/index.js","../../../../node_modules/socket.io-client/lib/socket.js","../../../../node_modules/socket.io-client/lib/index.js","../../../client/app.js"],"sourcesContent":["'use strict'\n\nimport * as state from './state'\n\nfunction persistState (payload) {\n  const requestOpts = {\n    method: 'PUT',\n    body: JSON.stringify(payload),\n    headers: { 'Content-Type': 'application/json' }\n  }\n\n  fetch('/model', requestOpts)\n    .then(res => res.json())\n    .then(json => { state.render(state.represent(json)) })\n    .catch(err => { state.render(state.represent(err)) })\n\n  return false\n}\n\nexport function addNewJob (present) {\n  return persistState({ newJob: true })\n}\n\nexport function switchToTab (tabName, present) {\n  return persistState({ tabChange: tabName })\n}\n\nexport function dismissAlert (model) {\n  state.render(model)\n  return false\n}\n\nexport function reboot () {\n  fetch('/reboot')\n    .then(res => res.json())\n    .then(json => { state.render(state.represent(json)) })\n    .catch(err => { state.render(state.represent(err)) })\n\n  return false\n}\n\nexport function shutdown () {\n  fetch('/shutdown')\n    .then(res => res.json())\n    .then(json => { state.render(state.represent(json)) })\n    .catch(err => { state.render(state.represent(err)) })\n\n  return false\n}\n\nexport function completeDeviceAction (model) {\n  if (model.reboot) {\n    location.reload()\n  } else {\n    model.completed = true\n    state.render(model)\n  }\n}\n\nexport function save (data, present) {\n  return persistState(data)\n}\n","'use strict'\n\nimport InfernoDOM from 'inferno-dom'\n\nimport { Main } from '../components/Main'\n\nexport function mainComponent (model) {\n  return Main(model)\n}\n\nexport function display (representation) {\n  const reprEl = document.getElementById('representation')\n  if (reprEl) {\n    InfernoDOM.render(representation, reprEl)\n  }\n}\n","'use strict'\n\nimport { completeDeviceAction } from './actions'\nimport { mainComponent, display } from './view'\n\nexport function represent (model) {\n  if (model.reboot || model.shutdown) {\n    return model\n  }\n\n  let currentState = model.tools\n    .filter(t => t.active)\n    .map(t => {\n      return {\n        name: t.name,\n        active: t.name === model.selectedTool,\n        configuration: t.configuration,\n        lastUpdated: new Date(model.lastUpdated).toString()\n      }\n    })\n\n  currentState.alert = model.result\n  return currentState\n}\n\nexport function hasCountdownEnded (stateModel) {\n  return stateModel.countdown === 0\n}\n\nexport function isExecutingDeviceAction (stateModel) {\n  return stateModel.reboot || stateModel.shutdown\n}\n\nexport function nextAction (stateModel) {\n  if (isExecutingDeviceAction(stateModel)) {\n    if (hasCountdownEnded(stateModel)) {\n      completeDeviceAction(stateModel)\n    } else {\n      stateModel.countdown -= 1\n      setTimeout(() => { render(stateModel) }, 1000)\n    }\n  }\n}\n\nexport function render (stateModel) {\n  display(mainComponent(stateModel))\n  nextAction(stateModel)\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000\nvar m = s * 60\nvar h = m * 60\nvar d = h * 24\nvar y = d * 365.25\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {}\n  var type = typeof val\n  if (type === 'string' && val.length > 0) {\n    return parse(val)\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ?\n\t\t\tfmtLong(val) :\n\t\t\tfmtShort(val)\n  }\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val))\n}\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str)\n  if (str.length > 10000) {\n    return\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str)\n  if (!match) {\n    return\n  }\n  var n = parseFloat(match[1])\n  var type = (match[2] || 'ms').toLowerCase()\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n\n    default:\n      return undefined\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd'\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h'\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm'\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's'\n  }\n  return ms + 'ms'\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms'\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's'\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000\nvar m = s * 60\nvar h = m * 60\nvar d = h * 24\nvar y = d * 365.25\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {}\n  var type = typeof val\n  if (type === 'string' && val.length > 0) {\n    return parse(val)\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ?\n\t\t\tfmtLong(val) :\n\t\t\tfmtShort(val)\n  }\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val))\n}\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str)\n  if (str.length > 10000) {\n    return\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str)\n  if (!match) {\n    return\n  }\n  var n = parseFloat(match[1])\n  var type = (match[2] || 'ms').toLowerCase()\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n\n    default:\n      return undefined\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd'\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h'\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm'\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's'\n  }\n  return ms + 'ms'\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms'\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's'\n}\n","\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      // see: https://github.com/Automattic/has-binary/pull/4\n      if (obj.toJSON && 'function' == typeof obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname !== global.location.hostname ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  } else {\n    this.extraHeaders = opts.extraHeaders;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n    if (this.supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      if (!this.supportsBinary) {\n        data = this.xhr.responseText;\n      } else {\n        try {\n          data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n        } catch (e) {\n          var ui8Arr = new Uint8Array(this.xhr.response);\n          var dataArray = [];\n          for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n            dataArray.push(ui8Arr[idx]);\n          }\n\n          data = String.fromCharCode.apply(null, dataArray);\n        }\n      }\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (global.document) {\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar NodeWebSocket;\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  WebSocket = NodeWebSocket;\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  if (!this.usingBrowserWebSocket) {\n    WebSocket = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = void (0);\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws = this.usingBrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parsejson = require('parsejson');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (global.location && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? null : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global === 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    agent: this.agent,\n    hostname: this.hostname,\n    port: this.port,\n    secure: this.secure,\n    path: this.path,\n    query: query,\n    forceJSONP: this.forceJSONP,\n    jsonp: this.jsonp,\n    forceBase64: this.forceBase64,\n    enablesXDR: this.enablesXDR,\n    timestampRequests: this.timestampRequests,\n    timestampParam: this.timestampParam,\n    policyPort: this.policyPort,\n    socket: this,\n    pfx: this.pfx,\n    key: this.key,\n    passphrase: this.passphrase,\n    cert: this.cert,\n    ca: this.ca,\n    ciphers: this.ciphers,\n    rejectUnauthorized: this.rejectUnauthorized,\n    perMessageDeflate: this.perMessageDeflate,\n    extraHeaders: this.extraHeaders,\n    forceNode: this.forceNode,\n    localAddress: this.localAddress\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  this.encoder = new parser.Encoder();\n  this.decoder = new parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.engine.id;\n    }\n  }\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.engine.id;\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting evnet is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/*!\n * inferno-dom v0.7.27\n * (c) 2016 Dominic Gannaway\n * Released under the MIT License.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.InfernoDOM = factory());\n}(this, (function () { 'use strict';\n\nfunction addChildrenToProps(children, props) {\n\tif (!isNullOrUndefined(children)) {\n\t\tvar isChildrenArray = isArray(children);\n\t\tif (isChildrenArray && children.length > 0 || !isChildrenArray) {\n\t\t\tif (props) {\n\t\t\t\tprops = Object.assign({}, props, { children: children });\n\t\t\t} else {\n\t\t\t\tprops = {\n\t\t\t\t\tchildren: children\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\treturn props;\n}\n\nvar NO_RENDER = 'NO_RENDER';\n\n// Runs only once in applications lifetime\nvar isBrowser = typeof window !== 'undefined' && window.document;\n\nfunction isArray(obj) {\n\treturn obj instanceof Array;\n}\n\nfunction isStatefulComponent(obj) {\n\treturn obj.prototype && obj.prototype.render !== undefined;\n}\n\nfunction isStringOrNumber(obj) {\n\treturn isString(obj) || isNumber(obj);\n}\n\nfunction isNullOrUndefined(obj) {\n\treturn isUndefined(obj) || isNull(obj);\n}\n\nfunction isInvalidNode(obj) {\n\treturn isNull(obj) || obj === false || obj === true || isUndefined(obj);\n}\n\nfunction isFunction(obj) {\n\treturn typeof obj === 'function';\n}\n\nfunction isString(obj) {\n\treturn typeof obj === 'string';\n}\n\nfunction isNumber(obj) {\n\treturn typeof obj === 'number';\n}\n\nfunction isNull(obj) {\n\treturn obj === null;\n}\n\nfunction isTrue(obj) {\n\treturn obj === true;\n}\n\nfunction isUndefined(obj) {\n\treturn obj === undefined;\n}\n\nfunction deepScanChildrenForNode(children, node) {\n\tif (!isInvalidNode(children)) {\n\t\tif (isArray(children)) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i];\n\n\t\t\t\tif (!isInvalidNode(child)) {\n\t\t\t\t\tif (child === node) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (child.children) {\n\t\t\t\t\t\treturn deepScanChildrenForNode(child.children, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (children === node) {\n\t\t\t\treturn true;\n\t\t\t} else if (children.children) {\n\t\t\t\treturn deepScanChildrenForNode(children.children, node);\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getRefInstance$1(node, instance) {\n\tvar children = instance.props.children;\n\n\tif (deepScanChildrenForNode(children, node)) {\n\t\treturn getRefInstance$1(node, instance._parentComponent);\n\t}\n\treturn instance;\n}\n\nvar recyclingEnabled = true;\n\nfunction recycle(node, bp, lifecycle, context, instance) {\n\tif (bp !== undefined) {\n\t\tvar pool = bp.pool;\n\t\tvar recycledNode = pool.pop();\n\n\t\tif (!isNullOrUndefined(recycledNode)) {\n\t\t\tpatch(recycledNode, node, null, lifecycle, context, instance, bp.isSVG);\n\t\t\treturn node.dom;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction pool(node) {\n\tvar bp = node.bp;\n\n\tif (!isNullOrUndefined(bp)) {\n\t\tbp.pool.push(node);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction unmount(input, parentDom) {\n\tif (isVList(input)) {\n\t\tunmountVList(input, parentDom, true);\n\t} else if (isVNode(input)) {\n\t\tunmountVNode(input, parentDom, false);\n\t}\n}\n\nfunction unmountVList(vList, parentDom, removePointer) {\n\tvar items = vList.items;\n\tvar itemsLength = items.length;\n\tvar pointer = vList.pointer;\n\n\tif (itemsLength > 0) {\n\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\tvar item = items[i];\n\n\t\t\tif (isVList(item)) {\n\t\t\t\tunmountVList(item, parentDom, true);\n\t\t\t} else {\n\t\t\t\tif (parentDom) {\n\t\t\t\t\tremoveChild(parentDom, item.dom);\n\t\t\t\t}\n\t\t\t\tunmount(item, null);\n\t\t\t}\n\t\t}\n\t}\n\tif (parentDom && removePointer) {\n\t\tremoveChild(parentDom, pointer);\n\t}\n}\n\nfunction unmountVNode(node, parentDom, shallow) {\n\tvar instance = node.instance;\n\tvar instanceHooks = null;\n\tvar instanceChildren = null;\n\n\tif (!isNullOrUndefined(instance)) {\n\t\tinstanceHooks = instance.hooks;\n\t\tinstanceChildren = instance.children;\n\n\t\tif (instance.render !== undefined) {\n\t\t\tinstance.componentWillUnmount();\n\t\t\tinstance._unmounted = true;\n\t\t\tcomponentToDOMNodeMap.delete(instance);\n\t\t\t!shallow && unmount(instance._lastNode, null);\n\t\t}\n\t}\n\tvar hooks = node.hooks || instanceHooks;\n\n\tif (!isNullOrUndefined(hooks)) {\n\t\tif (!isNullOrUndefined(hooks.willDetach)) {\n\t\t\thooks.willDetach(node.dom);\n\t\t}\n\t\tif (!isNullOrUndefined(hooks.componentWillUnmount)) {\n\t\t\thooks.componentWillUnmount(node.dom, hooks);\n\t\t}\n\t}\n\tvar children = (isNullOrUndefined(instance) ? node.children : null) || instanceChildren;\n\n\tif (!isNullOrUndefined(children)) {\n\t\tif (isArray(children)) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tunmount(children[i], null);\n\t\t\t}\n\t\t} else {\n\t\t\tunmount(children, null);\n\t\t}\n\t}\n}\n\nfunction VText(text) {\n\tthis.text = text;\n\tthis.dom = null;\n}\n\nfunction VPlaceholder() {\n\tthis.placeholder = true;\n\tthis.dom = null;\n}\n\nfunction VList(items) {\n\tthis.dom = null;\n\tthis.pointer = null;\n\tthis.items = items;\n}\n\nfunction createVText(text) {\n\treturn new VText(text);\n}\n\nfunction createVPlaceholder() {\n\treturn new VPlaceholder();\n}\n\nfunction createVList(items) {\n\treturn new VList(items);\n}\n\nfunction constructDefaults(string, object, value) {\n\t/* eslint no-return-assign: 0 */\n\tstring.split(',').forEach(function (i) { return object[i] = value; });\n}\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\nvar xmlNS = 'http://www.w3.org/XML/1998/namespace';\nvar strictProps = {};\nvar booleanProps = {};\nvar namespaces = {};\nvar isUnitlessNumber = {};\n\nconstructDefaults('xlink:href,xlink:arcrole,xlink:actuate,xlink:role,xlink:titlef,xlink:type', namespaces, xlinkNS);\nconstructDefaults('xml:base,xml:lang,xml:space', namespaces, xmlNS);\nconstructDefaults('volume,value', strictProps, true);\nconstructDefaults('muted,scoped,loop,open,checked,default,capture,disabled,selected,readonly,multiple,required,autoplay,controls,seamless,reversed,allowfullscreen,novalidate', booleanProps, true);\nconstructDefaults('animationIterationCount,borderImageOutset,borderImageSlice,borderImageWidth,boxFlex,boxFlexGroup,boxOrdinalGroup,columnCount,flex,flexGrow,flexPositive,flexShrink,flexNegative,flexOrder,gridRow,gridColumn,fontWeight,lineClamp,lineHeight,opacity,order,orphans,tabSize,widows,zIndex,zoom,fillOpacity,floodOpacity,stopOpacity,strokeDasharray,strokeDashoffset,strokeMiterlimit,strokeOpacity,strokeWidth,', isUnitlessNumber, true);\n\nfunction isVText(o) {\n\treturn o.text !== undefined;\n}\n\nfunction isVPlaceholder(o) {\n\treturn o.placeholder === true;\n}\n\nfunction isVList(o) {\n\treturn o.items !== undefined;\n}\n\nfunction isVNode(o) {\n\treturn o.tag !== undefined || o.bp !== undefined;\n}\n\nfunction insertOrAppend(parentDom, newNode, nextNode) {\n\tif (isNullOrUndefined(nextNode)) {\n\t\tparentDom.appendChild(newNode);\n\t} else {\n\t\tparentDom.insertBefore(newNode, nextNode);\n\t}\n}\n\nfunction replaceVListWithNode(parentDom, vList, dom) {\n\tvar pointer = vList.pointer;\n\n\tunmountVList(vList, parentDom, false);\n\treplaceNode(parentDom, dom, pointer);\n}\n\nfunction documentCreateElement(tag, isSVG) {\n\tvar dom;\n\n\tif (isSVG === true) {\n\t\tdom = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\t} else {\n\t\tdom = document.createElement(tag);\n\t}\n\treturn dom;\n}\n\nfunction appendText(text, parentDom, singleChild) {\n\tif (parentDom === null) {\n\t\treturn document.createTextNode(text);\n\t} else {\n\t\tif (singleChild) {\n\t\t\tif (text !== '') {\n\t\t\t\tparentDom.textContent = text;\n\t\t\t\treturn parentDom.firstChild;\n\t\t\t} else {\n\t\t\t\tvar textNode = document.createTextNode('');\n\n\t\t\t\tparentDom.appendChild(textNode);\n\t\t\t\treturn textNode;\n\t\t\t}\n\t\t} else {\n\t\t\tvar textNode$1 = document.createTextNode(text);\n\n\t\t\tparentDom.appendChild(textNode$1);\n\t\t\treturn textNode$1;\n\t\t}\n\t}\n}\n\nfunction replaceWithNewNode(lastNode, nextNode, parentDom, lifecycle, context, instance, isSVG) {\n\tvar lastInstance = null;\n\tvar instanceLastNode = lastNode._lastNode;\n\n\tif (!isNullOrUndefined(instanceLastNode)) {\n\t\tlastInstance = lastNode;\n\t\tlastNode = instanceLastNode;\n\t}\n\tunmount(lastNode, false);\n\tvar dom = mount(nextNode, null, lifecycle, context, instance, isSVG);\n\n\tnextNode.dom = dom;\n\treplaceNode(parentDom, dom, lastNode.dom);\n\tif (lastInstance !== null) {\n\t\tlastInstance._lastNode = nextNode;\n\t}\n}\n\nfunction replaceNode(parentDom, nextDom, lastDom) {\n\tparentDom.replaceChild(nextDom, lastDom);\n}\n\nfunction normalise(object) {\n\tif (isStringOrNumber(object)) {\n\t\treturn createVText(object);\n\t} else if (isInvalidNode(object)) {\n\t\treturn createVPlaceholder();\n\t} else if (isArray(object)) {\n\t\treturn createVList(object);\n\t}\n\treturn object;\n}\n\nfunction normaliseChild(children, i) {\n\tvar child = children[i];\n\n\treturn children[i] = normalise(child);\n}\n\nfunction remove(node, parentDom) {\n\tif (isVList(node)) {\n\t\treturn unmount(node, parentDom);\n\t}\n\tvar dom = node.dom;\n\tif (dom === parentDom) {\n\t\tdom.innerHTML = '';\n\t} else {\n\t\tremoveChild(parentDom, dom);\n\t\tif (recyclingEnabled) {\n\t\t\tpool(node);\n\t\t}\n\t}\n\tunmount(node, false);\n}\n\nfunction removeChild(parentDom, dom) {\n\tparentDom.removeChild(dom);\n}\n\nfunction removeEvents(events, lastEventKeys, dom) {\n\tvar eventKeys = lastEventKeys || Object.keys(events);\n\n\tfor (var i = 0; i < eventKeys.length; i++) {\n\t\tvar event = eventKeys[i];\n\n\t\tdom[event] = null;\n\t}\n}\n\n// TODO: for node we need to check if document is valid\nfunction getActiveNode() {\n\treturn document.activeElement;\n}\n\nfunction removeAllChildren(dom, children) {\n\tif (recyclingEnabled) {\n\t\tvar childrenLength = children.length;\n\n\t\tif (childrenLength > 5) {\n\t\t\tfor (var i = 0; i < childrenLength; i++) {\n\t\t\t\tvar child = children[i];\n\n\t\t\t\tif (!isInvalidNode(child)) {\n\t\t\t\t\tpool(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tdom.textContent = '';\n}\n\nfunction resetActiveNode(activeNode) {\n\tif (activeNode !== null && activeNode !== document.body && document.activeElement !== activeNode) {\n\t\tactiveNode.focus(); // TODO: verify are we doing new focus event, if user has focus listener this might trigger it\n\t}\n}\n\nfunction isKeyed(lastChildren, nextChildren) {\n\tif (lastChildren.complex) {\n\t\treturn false;\n\t}\n\treturn nextChildren.length && !isNullOrUndefined(nextChildren[0]) && !isNullOrUndefined(nextChildren[0].key)\n\t\t&& lastChildren.length && !isNullOrUndefined(lastChildren[0]) && !isNullOrUndefined(lastChildren[0].key);\n}\n\nfunction selectOptionValueIfNeeded(vdom, values) {\n\tif (vdom.tag !== 'option') {\n\t\tfor (var i = 0, len = vdom.children.length; i < len; i++) {\n\t\t\tselectOptionValueIfNeeded(vdom.children[i], values);\n\t\t}\n\t\t// NOTE! Has to be a return here to catch optGroup elements\n\t\treturn;\n\t}\n\n\tvar value = vdom.attrs && vdom.attrs.value;\n\n\tif (values[value]) {\n\t\tvdom.attrs = vdom.attrs || {};\n\t\tvdom.attrs.selected = 'selected';\n\t\tvdom.dom.selected = true;\n\t} else {\n\t\tvdom.dom.selected = false;\n\t}\n}\n\nfunction selectValue(vdom) {\n\tvar value = vdom.attrs && vdom.attrs.value;\n\n\tvar values = {};\n\tif (isArray(value)) {\n\t\tfor (var i = 0, len = value.length; i < len; i++) {\n\t\t\tvalues[value[i]] = value[i];\n\t\t}\n\t} else {\n\t\tvalues[value] = value;\n\t}\n\tfor (var i$1 = 0, len$1 = vdom.children.length; i$1 < len$1; i$1++) {\n\t\tselectOptionValueIfNeeded(vdom.children[i$1], values);\n\t}\n\n\tif (vdom.attrs && vdom.attrs[value]) {\n\t\tdelete vdom.attrs.value; // TODO! Avoid deletion here. Set to null or undef. Not sure what you want to usev\n\t}\n}\n\nfunction handleAttachedHooks(hooks, lifecycle, dom) {\n\tif (!isNullOrUndefined(hooks.created)) {\n\t\thooks.created(dom);\n\t}\n\tif (!isNullOrUndefined(hooks.attached)) {\n\t\tlifecycle.addListener(function () {\n\t\t\thooks.attached(dom);\n\t\t});\n\t}\n}\n\nfunction setValueProperty(nextNode) {\n\tvar value = nextNode.attrs.value;\n\tif (!isNullOrUndefined(value)) {\n\t\tnextNode.dom.value = value;\n\t}\n}\n\nfunction setFormElementProperties(nextTag, nextNode) {\n\tif (nextTag === 'input' && nextNode.attrs) {\n\t\tvar inputType = nextNode.attrs.type;\n\t\tif (inputType === 'text') {\n\t\t\tsetValueProperty(nextNode);\n\t\t} else if (inputType === 'checkbox' || inputType === 'radio') {\n\t\t\tvar checked = nextNode.attrs.checked;\n\t\t\tnextNode.dom.checked = !!checked;\n\t\t}\n\t} else if (nextTag === 'textarea') {\n\t\tsetValueProperty(nextNode);\n\t}\n}\n\nfunction mount(input, parentDom, lifecycle, context, instance, isSVG) {\n\tif (isVPlaceholder(input)) {\n\t\treturn mountVPlaceholder(input, parentDom);\n\t} else if (isVText(input)) {\n\t\treturn mountVText(input, parentDom);\n\t} else if (isVList(input)) {\n\t\treturn mountVList(input, parentDom, lifecycle, context, instance, isSVG);\n\t} else if (isVNode(input)) {\n\t\treturn mountVNode$1(input, parentDom, lifecycle, context, instance, isSVG);\n\t} else {\n\t\tvar normalisedInput = normalise(input);\n\n\t\tif (input !== normalisedInput) {\n\t\t\treturn mount(normalisedInput, parentDom, lifecycle, context, instance, isSVG);\n\t\t} else {\n\t\t\tthrow new Error((\"Inferno Error: invalid object \\\"\" + (typeof input) + \"\\\" passed to mount()\"));\n\t\t}\n\t}\n}\n\nfunction mountVNode$1(vNode, parentDom, lifecycle, context, instance, isSVG) {\n\tvar bp = vNode.bp;\n\n\tif (isUndefined(bp)) {\n\t\treturn mountVNodeWithoutBlueprint(vNode, parentDom, lifecycle, context, instance, isSVG);\n\t} else {\n\t\tif (recyclingEnabled) {\n\t\t\tvar dom = recycle(vNode, bp, lifecycle, context, instance);\n\n\t\t\tif (!isNull(dom)) {\n\t\t\t\tif (!isNull(parentDom)) {\n\t\t\t\t\tparentDom.appendChild(dom);\n\t\t\t\t}\n\t\t\t\treturn dom;\n\t\t\t}\n\t\t}\n\t\treturn mountVNodeWithBlueprint(vNode, bp, parentDom, lifecycle, context, instance);\n\t}\n}\n\nfunction mountVList(vList, parentDom, lifecycle, context, instance, isSVG) {\n\tvar items = vList.items;\n\tvar pointer = document.createTextNode('');\n\tvar dom = document.createDocumentFragment();\n\n\tmountArrayChildren(items, dom, lifecycle, context, instance, isSVG);\n\tvList.pointer = pointer;\n\tvList.dom = dom;\n\tdom.appendChild(pointer);\n\tif (parentDom) {\n\t\tinsertOrAppend(parentDom, dom);\n\t}\n\treturn dom;\n}\n\nfunction mountVText(vText, parentDom) {\n\tvar dom = document.createTextNode(vText.text);\n\n\tvText.dom = dom;\n\tif (parentDom) {\n\t\tinsertOrAppend(parentDom, dom);\n\t}\n\treturn dom;\n}\n\nfunction mountVPlaceholder(vPlaceholder, parentDom) {\n\tvar dom = document.createTextNode('');\n\n\tvPlaceholder.dom = dom;\n\tif (parentDom) {\n\t\tinsertOrAppend(parentDom, dom);\n\t}\n\treturn dom;\n}\n\nfunction handleSelects(node) {\n\tif (node.tag === 'select') {\n\t\tselectValue(node);\n\t}\n}\n\nfunction mountBlueprintAttrs(node, bp, dom, instance) {\n\thandleSelects(node);\n\tvar attrs = node.attrs;\n\n\tif (isNull(bp.attrKeys)) {\n\t\tvar newKeys = Object.keys(attrs);\n\t\tbp.attrKeys = bp.attrKeys ? bp.attrKeys.concat(newKeys) : newKeys;\n\t}\n\tvar attrKeys = bp.attrKeys;\n\n\tmountAttributes(node, attrs, attrKeys, dom, instance);\n}\n\nfunction mountBlueprintEvents(node, bp, dom) {\n\tvar events = node.events;\n\n\tif (isNull(bp.eventKeys)) {\n\t\tbp.eventKeys = Object.keys(events);\n\t}\n\tvar eventKeys = bp.eventKeys;\n\n\tmountEvents(events, eventKeys, dom);\n}\n\nfunction mountVNodeWithBlueprint(node, bp, parentDom, lifecycle, context, instance) {\n\tvar tag = node.tag;\n\n\tif (isTrue(bp.isComponent)) {\n\t\treturn mountComponent(node, tag, node.attrs || {}, node.hooks, node.children, instance, parentDom, lifecycle, context);\n\t}\n\tvar dom = documentCreateElement(bp.tag, bp.isSVG);\n\n\tnode.dom = dom;\n\tif (isTrue(bp.hasHooks)) {\n\t\thandleAttachedHooks(node.hooks, lifecycle, dom);\n\t}\n\tif (isTrue(bp.lazy)) {\n\t\thandleLazyAttached(node, lifecycle, dom);\n\t}\n\tvar children = node.children;\n\t// bp.childrenType:\n\t// 0: no children\n\t// 1: text node\n\t// 2: single child\n\t// 3: multiple children\n\t// 4: multiple children (keyed)\n\t// 5: variable children (defaults to no optimisation)\n\n\tswitch (bp.childrenType) {\n\t\tcase 1:\n\t\t\tappendText(children, dom, true);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tmount(node.children, dom, lifecycle, context, instance, bp.isSVG);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tmountArrayChildren(children, dom, lifecycle, context, instance, bp.isSVG);\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tmount(children[i], dom, lifecycle, context, instance, bp.isSVG);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tmountChildren(node, children, dom, lifecycle, context, instance, bp.isSVG);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\tif (isTrue(bp.hasAttrs)) {\n\t\tmountBlueprintAttrs(node, bp, dom, instance);\n\t}\n\tif (isTrue(bp.hasClassName)) {\n\t\tdom.className = node.className;\n\t}\n\tif (isTrue(bp.hasStyle)) {\n\t\tpatchStyle(null, node.style, dom);\n\t}\n\tif (isTrue(bp.hasEvents)) {\n\t\tmountBlueprintEvents(node, bp, dom);\n\t}\n\tif (!isNull(parentDom)) {\n\t\tparentDom.appendChild(dom);\n\t}\n\treturn dom;\n}\n\nfunction mountVNodeWithoutBlueprint(node, parentDom, lifecycle, context, instance, isSVG) {\n\tvar tag = node.tag;\n\n\tif (isFunction(tag)) {\n\t\treturn mountComponent(node, tag, node.attrs || {}, node.hooks, node.children, instance, parentDom, lifecycle, context);\n\t}\n\tif (!isString(tag) || tag === '') {\n\t\tthrow Error('Inferno Error: Expected function or string for element tag type');\n\t}\n\tif (tag === 'svg') {\n\t\tisSVG = true;\n\t}\n\tvar dom = documentCreateElement(tag, isSVG);\n\tvar children = node.children;\n\tvar attrs = node.attrs;\n\tvar events = node.events;\n\tvar hooks = node.hooks;\n\tvar className = node.className;\n\tvar style = node.style;\n\n\tnode.dom = dom;\n\tif (!isNullOrUndefined(hooks)) {\n\t\thandleAttachedHooks(hooks, lifecycle, dom);\n\t}\n\tif (!isInvalidNode(children)) {\n\t\tmountChildren(node, children, dom, lifecycle, context, instance, isSVG);\n\t}\n\tif (!isNullOrUndefined(attrs)) {\n\t\thandleSelects(node);\n\t\tmountAttributes(node, attrs, Object.keys(attrs), dom, instance);\n\t}\n\tif (!isNullOrUndefined(className)) {\n\t\tdom.className = className;\n\t}\n\tif (!isNullOrUndefined(style)) {\n\t\tpatchStyle(null, style, dom);\n\t}\n\tif (!isNullOrUndefined(events)) {\n\t\tmountEvents(events, Object.keys(events), dom);\n\t}\n\tif (!isNull(parentDom)) {\n\t\tparentDom.appendChild(dom);\n\t}\n\treturn dom;\n}\n\nfunction mountArrayChildren(children, parentDom, lifecycle, context, instance, isSVG) {\n\tchildren.complex = false;\n\tfor (var i = 0; i < children.length; i++) {\n\t\tvar child = normaliseChild(children, i);\n\n\t\tif (isVText(child)) {\n\t\t\tmountVText(child, parentDom);\n\t\t\tchildren.complex = true;\n\t\t} else if (isVPlaceholder(child)) {\n\t\t\tmountVPlaceholder(child, parentDom);\n\t\t\tchildren.complex = true;\n\t\t} else if (isVList(child)) {\n\t\t\tmountVList(child, parentDom, lifecycle, context, instance, isSVG);\n\t\t\tchildren.complex = true;\n\t\t} else {\n\t\t\tmount(child, parentDom, lifecycle, context, instance, isSVG);\n\t\t}\n\t}\n}\n\nfunction mountChildren(node, children, parentDom, lifecycle, context, instance, isSVG) {\n\tif (isArray(children)) {\n\t\tmountArrayChildren(children, parentDom, lifecycle, context, instance, isSVG);\n\t} else if (isStringOrNumber(children)) {\n\t\tappendText(children, parentDom, true);\n\t} else if (!isInvalidNode(children)) {\n\t\tmount(children, parentDom, lifecycle, context, instance, isSVG);\n\t}\n}\n\nfunction mountRef(instance, value, refValue) {\n\tif (!isInvalidNode(instance) && isString(value)) {\n\t\tinstance.refs[value] = refValue;\n\t}\n}\n\nfunction mountEvents(events, eventKeys, dom) {\n\tfor (var i = 0; i < eventKeys.length; i++) {\n\t\tvar event = eventKeys[i];\n\n\t\tdom[event] = events[event];\n\t}\n}\n\nfunction mountComponent(parentNode, Component, props, hooks, children, lastInstance, parentDom, lifecycle, context) {\n\tprops = addChildrenToProps(children, props);\n\n\tvar dom;\n\tif (isStatefulComponent(Component)) {\n\t\tvar instance = new Component(props, context);\n\n\t\tinstance._patch = patch;\n\t\tinstance._componentToDOMNodeMap = componentToDOMNodeMap;\n\t\tif (!isNullOrUndefined(lastInstance) && props.ref) {\n\t\t\tmountRef(lastInstance, props.ref, instance);\n\t\t}\n\t\tvar childContext = instance.getChildContext();\n\n\t\tif (!isNullOrUndefined(childContext)) {\n\t\t\tcontext = Object.assign({}, context, childContext);\n\t\t}\n\t\tinstance.context = context;\n\t\tinstance._unmounted = false;\n\t\tinstance._parentNode = parentNode;\n\t\tif (lastInstance) {\n\t\t\tinstance._parentComponent = lastInstance;\n\t\t}\n\t\tinstance._pendingSetState = true;\n\t\tinstance.componentWillMount();\n\t\tvar node = instance.render();\n\n\t\tif (isInvalidNode(node)) {\n\t\t\tnode = createVPlaceholder();\n\t\t}\n\t\tinstance._pendingSetState = false;\n\t\tdom = mount(node, null, lifecycle, context, instance, false);\n\t\tinstance._lastNode = node;\n\t\tinstance.componentDidMount();\n\t\tif (parentDom !== null && !isInvalidNode(dom)) {\n\t\t\tparentDom.appendChild(dom);\n\t\t}\n\t\tcomponentToDOMNodeMap.set(instance, dom);\n\t\tparentNode.dom = dom;\n\t\tparentNode.instance = instance;\n\t} else {\n\t\tif (!isNullOrUndefined(hooks)) {\n\t\t\tif (!isNullOrUndefined(hooks.componentWillMount)) {\n\t\t\t\thooks.componentWillMount(null, props);\n\t\t\t}\n\t\t\tif (!isNullOrUndefined(hooks.componentDidMount)) {\n\t\t\t\tlifecycle.addListener(function () {\n\t\t\t\t\thooks.componentDidMount(dom, props);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/* eslint new-cap: 0 */\n\t\tvar node$1 = Component(props, context);\n\n\t\tif (isInvalidNode(node$1)) {\n\t\t\tnode$1 = createVPlaceholder();\n\t\t}\n\t\tdom = mount(node$1, null, lifecycle, context, null, false);\n\n\t\tparentNode.instance = node$1;\n\n\t\tif (parentDom !== null && !isInvalidNode(dom)) {\n\t\t\tparentDom.appendChild(dom);\n\t\t}\n\t\tparentNode.dom = dom;\n\t}\n\treturn dom;\n}\n\nfunction mountAttributes(node, attrs, attrKeys, dom, instance) {\n\tfor (var i = 0; i < attrKeys.length; i++) {\n\t\tvar attr = attrKeys[i];\n\n\t\tif (attr === 'ref') {\n\t\t\tmountRef(getRefInstance$1(node, instance), attrs[attr], dom);\n\t\t} else {\n\t\t\tpatchAttribute(attr, null, attrs[attr], dom);\n\t\t}\n\t}\n}\n\nfunction patch(lastInput, nextInput, parentDom, lifecycle, context, instance, isSVG) {\n\tif (lastInput !== nextInput) {\n\t\tif (isInvalidNode(lastInput)) {\n\t\t\tmount(nextInput, parentDom, lifecycle, context, instance, isSVG);\n\t\t} else if (isInvalidNode(nextInput)) {\n\t\t\tremove(lastInput, parentDom);\n\t\t} else if (isStringOrNumber(lastInput)) {\n\t\t\tif (isStringOrNumber(nextInput)) {\n\t\t\t\tparentDom.firstChild.nodeValue = nextInput;\n\t\t\t} else {\n\t\t\t\tvar dom = mount(nextInput, null, lifecycle, context, instance, isSVG);\n\n\t\t\t\tnextInput.dom = dom;\n\t\t\t\treplaceNode(parentDom, dom, parentDom.firstChild);\n\t\t\t}\n\t\t} else if (isStringOrNumber(nextInput)) {\n\t\t\treplaceNode(parentDom, document.createTextNode(nextInput), lastInput.dom);\n\t\t} else {\n\t\t\tif (isVList(nextInput)) {\n\t\t\t\tif (isVList(lastInput)) {\n\t\t\t\t\tpatchVList(lastInput, nextInput, parentDom, lifecycle, context, instance, isSVG);\n\t\t\t\t} else {\n\t\t\t\t\treplaceNode(parentDom, mountVList(nextInput, null, lifecycle, context, instance, isSVG), lastInput.dom);\n\t\t\t\t\tunmount(lastInput, null);\n\t\t\t\t}\n\t\t\t} else if (isVList(lastInput)) {\n\t\t\t\treplaceVListWithNode(parentDom, lastInput, mount(nextInput, null, lifecycle, context, instance, isSVG));\n\t\t\t} else if (isVPlaceholder(nextInput)) {\n\t\t\t\tif (isVPlaceholder(lastInput)) {\n\t\t\t\t\tpatchVFragment(lastInput, nextInput);\n\t\t\t\t} else {\n\t\t\t\t\treplaceNode(parentDom, mountVPlaceholder(nextInput, null), lastInput.dom);\n\t\t\t\t\tunmount(lastInput, null);\n\t\t\t\t}\n\t\t\t} else if (isVPlaceholder(lastInput)) {\n\t\t\t\treplaceNode(parentDom, mount(nextInput, null, lifecycle, context, instance, isSVG), lastInput.dom);\n\t\t\t} else if (isVText(nextInput)) {\n\t\t\t\tif (isVText(lastInput)) {\n\t\t\t\t\tpatchVText(lastInput, nextInput);\n\t\t\t\t} else {\n\t\t\t\t\treplaceNode(parentDom, mountVText(nextInput, null), lastInput.dom);\n\t\t\t\t\tunmount(lastInput, null);\n\t\t\t\t}\n\t\t\t} else if (isVText(lastInput)) {\n\t\t\t\treplaceNode(parentDom, mount(nextInput, null, lifecycle, context, instance, isSVG), lastInput.dom);\n\t\t\t} else if (isVNode(nextInput)) {\n\t\t\t\tif (isVNode(lastInput)) {\n\t\t\t\t\tpatchVNode(lastInput, nextInput, parentDom, lifecycle, context, instance, isSVG, false);\n\t\t\t\t} else {\n\t\t\t\t\treplaceNode(parentDom, mountVNode(nextInput, null, lifecycle, context, instance, isSVG), lastInput.dom);\n\t\t\t\t\tunmount(lastInput, null);\n\t\t\t\t}\n\t\t\t} else if (isVNode(lastInput)) {\n\t\t\t\treplaceNode(parentDom, mount(nextInput, null, lifecycle, context, instance, isSVG), lastInput.dom);\n\t\t\t\tunmount(lastInput, null);\n\t\t\t} else {\n\t\t\t\treturn patch(lastInput, normalise(nextInput), parentDom, lifecycle, context, instance, isSVG);\n\t\t\t}\n\t\t}\n\t}\n\treturn nextInput;\n}\n\nfunction patchTextNode(dom, lastChildren, nextChildren) {\n\tif (isStringOrNumber(lastChildren) && lastChildren !== '') {\n\t\tdom.firstChild.nodeValue = nextChildren;\n\t} else {\n\t\tdom.textContent = nextChildren;\n\t}\n}\n\nfunction patchRef(instance, lastValue, nextValue, dom) {\n\tif (instance) {\n\t\tif (isString(lastValue)) {\n\t\t\tdelete instance.refs[lastValue];\n\t\t}\n\t\tif (isString(nextValue)) {\n\t\t\tinstance.refs[nextValue] = dom;\n\t\t}\n\t}\n}\n\nfunction patchChildren(lastNode, nextNode, dom, lifecycle, context, instance, isSVG) {\n\tvar nextChildren = nextNode.children;\n\tvar lastChildren = lastNode.children;\n\n\tif (lastChildren === nextChildren) {\n\t\treturn;\n\t}\n\tif (isInvalidNode(lastChildren)) {\n\t\tif (isStringOrNumber(nextChildren)) {\n\t\t\tpatchTextNode(dom, lastChildren, nextChildren);\n\t\t} else if (!isInvalidNode(nextChildren)) {\n\t\t\tif (isArray(nextChildren)) {\n\t\t\t\tmountArrayChildren(nextChildren, dom, lifecycle, context, instance, isSVG);\n\t\t\t} else {\n\t\t\t\tmount(nextChildren, dom, lifecycle, context, instance, isSVG);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isInvalidNode(nextChildren)) {\n\t\t\tremoveAllChildren(dom, lastChildren);\n\t\t} else {\n\t\t\tif (isArray(lastChildren)) {\n\t\t\t\tif (isArray(nextChildren)) {\n\t\t\t\t\tnextChildren.complex = lastChildren.complex;\n\t\t\t\t\tif (isKeyed(lastChildren, nextChildren)) {\n\t\t\t\t\t\tpatchKeyedChildren(lastChildren, nextChildren, dom, lifecycle, context, instance, isSVG, null);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpatchNonKeyedChildren(lastChildren, nextChildren, dom, lifecycle, context, instance, isSVG, null);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpatchNonKeyedChildren(lastChildren, [nextChildren], dom, lifecycle, context, instance, isSVG, null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (isArray(nextChildren)) {\n\t\t\t\t\tvar lastChild = lastChildren;\n\n\t\t\t\t\tif (isStringOrNumber(lastChildren)) {\n\t\t\t\t\t\tlastChild = createVText(lastChild);\n\t\t\t\t\t\tlastChild.dom = dom.firstChild;\n\t\t\t\t\t}\n\t\t\t\t\tpatchNonKeyedChildren([lastChild], nextChildren, dom, lifecycle, context, instance, isSVG, null);\n\t\t\t\t} else if (isStringOrNumber(nextChildren)) {\n\t\t\t\t\tpatchTextNode(dom, lastChildren, nextChildren);\n\t\t\t\t} else if (isStringOrNumber(lastChildren)) {\n\t\t\t\t\tpatch(lastChildren, nextChildren, dom, lifecycle, context, instance, isSVG);\n\t\t\t\t} else {\n\t\t\t\t\tpatchVNode(lastChildren, nextChildren, dom, lifecycle, context, instance, isSVG, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction patchVNode(lastVNode, nextVNode, parentDom, lifecycle, context, instance, isSVG, skipLazyCheck) {\n\tvar lastBp = lastVNode.bp;\n\tvar nextBp = nextVNode.bp;\n\n\tif (lastBp === undefined || nextBp === undefined) {\n\t\tpatchVNodeWithoutBlueprint(lastVNode, nextVNode, parentDom, lifecycle, context, instance, isSVG);\n\t} else {\n\t\tpatchVNodeWithBlueprint(lastVNode, nextVNode, lastBp, nextBp, parentDom, lifecycle, context, instance, skipLazyCheck);\n\t}\n}\n\nfunction patchVNodeWithBlueprint(lastVNode, nextVNode, lastBp, nextBp, parentDom, lifecycle, context, instance, skipLazyCheck) {\n\tvar nextHooks;\n\n\tif (nextBp.hasHooks === true) {\n\t\tnextHooks = nextVNode.hooks;\n\t\tif (nextHooks && !isNullOrUndefined(nextHooks.willUpdate)) {\n\t\t\tnextHooks.willUpdate(lastVNode.dom);\n\t\t}\n\t}\n\tvar nextTag = nextVNode.tag || nextBp.tag;\n\tvar lastTag = lastVNode.tag || lastBp.tag;\n\n\tif (lastTag !== nextTag) {\n\t\tif (lastBp && lastBp.isComponent === true) {\n\t\t\tvar lastNodeInstance = lastVNode.instance;\n\n\t\t\tif (nextBp.isComponent === true) {\n\t\t\t\treplaceWithNewNode(lastVNode, nextVNode, parentDom, lifecycle, context, instance, false);\n\t\t\t} else if (isStatefulComponent(lastTag)) {\n\t\t\t\tunmountVNode(lastVNode, null, true);\n\t\t\t\tvar lastNode = lastNodeInstance._lastNode;\n\t\t\t\tpatchVNodeWithBlueprint(lastNode, nextVNode, lastNode.bp, nextBp, parentDom, lifecycle, context, instance, nextBp.isSVG);\n\t\t\t} else {\n\t\t\t\tunmountVNode(lastVNode, null, true);\n\t\t\t\tpatchVNodeWithBlueprint(lastNodeInstance, nextVNode, lastNodeInstance.bp, nextBp, parentDom, lifecycle, context, instance, nextBp.isSVG);\n\t\t\t}\n\t\t} else {\n\t\t\treplaceWithNewNode(lastVNode, nextVNode, parentDom, lifecycle, context, instance, nextBp.isSVG);\n\t\t}\n\t} else if (isNullOrUndefined(lastTag)) {\n\t\tnextVNode.dom = lastVNode.dom;\n\t} else {\n\t\tif (lastBp && lastBp.isComponent === true) {\n\t\t\tif (nextBp.isComponent === true) {\n\t\t\t\tvar instance$1 = lastVNode.instance;\n\n\t\t\t\tif (!isNullOrUndefined(instance$1) && instance$1._unmounted) {\n\t\t\t\t\tvar newDom = mountComponent(nextVNode, lastTag, nextVNode.attrs || {}, nextVNode.hooks, nextVNode.children, instance$1, parentDom, lifecycle, context);\n\t\t\t\t\tif (parentDom !== null) {\n\t\t\t\t\t\treplaceNode(parentDom, newDom, lastVNode.dom);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnextVNode.instance = instance$1;\n\t\t\t\t\tnextVNode.dom = lastVNode.dom;\n\t\t\t\t\tpatchComponent(true, nextVNode, nextVNode.tag, lastBp, nextBp, instance$1, lastVNode.attrs || {}, nextVNode.attrs || {}, nextVNode.hooks, lastVNode.children, nextVNode.children, parentDom, lifecycle, context);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar dom = lastVNode.dom;\n\t\t\tvar lastChildrenType = lastBp.childrenType;\n\t\t\tvar nextChildrenType = nextBp.childrenType;\n\t\t\tnextVNode.dom = dom;\n\n\t\t\tif (nextBp.lazy === true && skipLazyCheck === false) {\n\t\t\t\tvar clipData = lastVNode.clipData;\n\n\t\t\t\tif (lifecycle.scrollY === null) {\n\t\t\t\t\tlifecycle.refresh();\n\t\t\t\t}\n\n\t\t\t\tnextVNode.clipData = clipData;\n\t\t\t\tif (clipData.pending === true || clipData.top - lifecycle.scrollY > lifecycle.screenHeight) {\n\t\t\t\t\tif (setClipNode(clipData, dom, lastVNode, nextVNode, parentDom, lifecycle, context, instance, lastBp.isSVG)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (clipData.bottom < lifecycle.scrollY) {\n\t\t\t\t\tif (setClipNode(clipData, dom, lastVNode, nextVNode, parentDom, lifecycle, context, instance, lastBp.isSVG)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (lastChildrenType > 0 || nextChildrenType > 0) {\n\t\t\t\tif (nextChildrenType === 5 || lastChildrenType === 5) {\n\t\t\t\t\tpatchChildren(lastVNode, nextVNode, dom, lifecycle, context, instance);\n\t\t\t\t} else {\n\t\t\t\t\tvar lastChildren = lastVNode.children;\n\t\t\t\t\tvar nextChildren = nextVNode.children;\n\n\t\t\t\t\tif (lastChildrenType === 0 || isInvalidNode(lastChildren)) {\n\t\t\t\t\t\tif (nextChildrenType > 2) {\n\t\t\t\t\t\t\tmountArrayChildren(nextChildren, dom, lifecycle, context, instance);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmount(nextChildren, dom, lifecycle, context, instance);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (nextChildrenType === 0 || isInvalidNode(nextChildren)) {\n\t\t\t\t\t\tif (lastChildrenType > 2) {\n\t\t\t\t\t\t\tremoveAllChildren(dom, lastChildren);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tremove(lastChildren, dom);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (lastChildren !== nextChildren) {\n\t\t\t\t\t\t\tif (lastChildrenType === 4 && nextChildrenType === 4) {\n\t\t\t\t\t\t\t\tpatchKeyedChildren(lastChildren, nextChildren, dom, lifecycle, context, instance, nextBp.isSVG, null);\n\t\t\t\t\t\t\t} else if (lastChildrenType === 2 && nextChildrenType === 2) {\n\t\t\t\t\t\t\t\tpatch(lastChildren, nextChildren, dom, lifecycle, context, instance, true, nextBp.isSVG);\n\t\t\t\t\t\t\t} else if (lastChildrenType === 1 && nextChildrenType === 1) {\n\t\t\t\t\t\t\t\tpatchTextNode(dom, lastChildren, nextChildren);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpatchChildren(lastVNode, nextVNode, dom, lifecycle, context, instance, nextBp.isSVG);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastBp.hasAttrs === true || nextBp.hasAttrs === true) {\n\t\t\t\tpatchAttributes(lastVNode, nextVNode, lastBp.attrKeys, nextBp.attrKeys, dom, instance);\n\t\t\t}\n\t\t\tif (lastBp.hasEvents === true || nextBp.hasEvents === true) {\n\t\t\t\tpatchEvents(lastVNode.events, nextVNode.events, lastBp.eventKeys, nextBp.eventKeys, dom);\n\t\t\t}\n\t\t\tif (lastBp.hasClassName === true || nextBp.hasClassName === true) {\n\t\t\t\tvar nextClassName = nextVNode.className;\n\n\t\t\t\tif (lastVNode.className !== nextClassName) {\n\t\t\t\t\tif (isNullOrUndefined(nextClassName)) {\n\t\t\t\t\t\tdom.removeAttribute('class');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdom.className = nextClassName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastBp.hasStyle === true || nextBp.hasStyle === true) {\n\t\t\t\tvar nextStyle = nextVNode.style;\n\t\t\t\tvar lastStyle = lastVNode.style;\n\n\t\t\t\tif (lastStyle !== nextStyle) {\n\t\t\t\t\tpatchStyle(lastStyle, nextStyle, dom);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (nextBp.hasHooks === true && !isNullOrUndefined(nextHooks.didUpdate)) {\n\t\t\t\tnextHooks.didUpdate(dom);\n\t\t\t}\n\t\t\tsetFormElementProperties(nextTag, nextVNode);\n\t\t}\n\t}\n}\n\nfunction patchVNodeWithoutBlueprint(lastNode, nextNode, parentDom, lifecycle, context, instance, isSVG) {\n\tvar nextHooks = nextNode.hooks;\n\tvar nextHooksDefined = !isNullOrUndefined(nextHooks);\n\n\tif (nextHooksDefined && !isNullOrUndefined(nextHooks.willUpdate)) {\n\t\tnextHooks.willUpdate(lastNode.dom);\n\t}\n\tvar nextTag = nextNode.tag || ((isNullOrUndefined(nextNode.bp)) ? null : nextNode.bp.tag);\n\tvar lastTag = lastNode.tag || ((isNullOrUndefined(lastNode.bp)) ? null : lastNode.bp.tag);\n\n\tif (nextTag === 'svg') {\n\t\tisSVG = true;\n\t}\n\tif (lastTag !== nextTag) {\n\t\tvar lastNodeInstance = lastNode.instance;\n\n\t\tif (isFunction(lastTag)) {\n\t\t\tif (isFunction(nextTag)) {\n\t\t\t\treplaceWithNewNode(lastNode, nextNode, parentDom, lifecycle, context, instance, isSVG);\n\t\t\t} else if (isStatefulComponent(lastTag)) {\n\t\t\t\tunmountVNode(lastNode, null, true);\n\t\t\t\tpatchVNodeWithoutBlueprint(lastNodeInstance._lastNode, nextNode, parentDom, lifecycle, context, instance, isSVG);\n\t\t\t} else {\n\t\t\t\tunmountVNode(lastNode, null, true);\n\t\t\t\tpatchVNodeWithoutBlueprint(lastNodeInstance, nextNode, parentDom, lifecycle, context, instance, isSVG);\n\t\t\t}\n\t\t} else {\n\t\t\treplaceWithNewNode(lastNodeInstance || lastNode, nextNode, parentDom, lifecycle, context, instance, isSVG);\n\t\t}\n\t} else if (isNullOrUndefined(lastTag)) {\n\t\tnextNode.dom = lastNode.dom;\n\t} else {\n\t\tif (isFunction(lastTag)) {\n\t\t\tif (isFunction(nextTag)) {\n\t\t\t\tvar instance$1 = lastNode._instance;\n\n\t\t\t\tif (!isNullOrUndefined(instance$1) && instance$1._unmounted) {\n\t\t\t\t\tvar newDom = mountComponent(nextNode, lastTag, nextNode.attrs || {}, nextNode.hooks, nextNode.children, instance$1, parentDom, lifecycle, context);\n\t\t\t\t\tif (parentDom !== null) {\n\t\t\t\t\t\treplaceNode(parentDom, newDom, lastNode.dom);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnextNode.instance = lastNode.instance;\n\t\t\t\t\tnextNode.dom = lastNode.dom;\n\t\t\t\t\tpatchComponent(false, nextNode, nextNode.tag, null, null, nextNode.instance, lastNode.attrs || {}, nextNode.attrs || {}, nextNode.hooks, lastNode.children, nextNode.children, parentDom, lifecycle, context);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar dom = lastNode.dom;\n\t\t\tvar nextClassName = nextNode.className;\n\t\t\tvar nextStyle = nextNode.style;\n\n\t\t\tnextNode.dom = dom;\n\n\t\t\tpatchChildren(lastNode, nextNode, dom, lifecycle, context, instance, isSVG);\n\t\t\tpatchAttributes(lastNode, nextNode, null, null, dom, instance);\n\t\t\tpatchEvents(lastNode.events, nextNode.events, null, null, dom);\n\n\t\t\tif (lastNode.className !== nextClassName) {\n\t\t\t\tif (isNullOrUndefined(nextClassName)) {\n\t\t\t\t\tdom.removeAttribute('class');\n\t\t\t\t} else {\n\t\t\t\t\tdom.className = nextClassName;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastNode.style !== nextStyle) {\n\t\t\t\tpatchStyle(lastNode.style, nextStyle, dom);\n\t\t\t}\n\t\t\tif (nextHooksDefined && !isNullOrUndefined(nextHooks.didUpdate)) {\n\t\t\t\tnextHooks.didUpdate(dom);\n\t\t\t}\n\t\t\tsetFormElementProperties(nextTag, nextNode);\n\t\t}\n\t}\n}\n\nfunction patchAttributes(lastNode, nextNode, lastAttrKeys, nextAttrKeys, dom, instance) {\n\tif (lastNode.tag === 'select') {\n\t\tselectValue(nextNode);\n\t}\n\tvar nextAttrs = nextNode.attrs;\n\tvar lastAttrs = lastNode.attrs;\n\tvar nextAttrsIsUndef = isNullOrUndefined(nextAttrs);\n\tvar lastAttrsIsNotUndef = !isNullOrUndefined(lastAttrs);\n\n\tif (!nextAttrsIsUndef) {\n\t\tvar nextAttrsKeys = nextAttrKeys || Object.keys(nextAttrs);\n\t\tvar attrKeysLength = nextAttrsKeys.length;\n\n\t\tfor (var i = 0; i < attrKeysLength; i++) {\n\t\t\tvar attr = nextAttrsKeys[i];\n\t\t\tvar lastAttrVal = lastAttrsIsNotUndef && lastAttrs[attr];\n\t\t\tvar nextAttrVal = nextAttrs[attr];\n\n\t\t\tif (lastAttrVal !== nextAttrVal) {\n\t\t\t\tif (attr === 'ref') {\n\t\t\t\t\tpatchRef(instance, lastAttrVal, nextAttrVal, dom);\n\t\t\t\t} else {\n\t\t\t\t\tpatchAttribute(attr, lastAttrVal, nextAttrVal, dom);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (lastAttrsIsNotUndef) {\n\t\tvar lastAttrsKeys = lastAttrKeys || Object.keys(lastAttrs);\n\t\tvar attrKeysLength$1 = lastAttrsKeys.length;\n\n\t\tfor (var i$1 = 0; i$1 < attrKeysLength$1; i$1++) {\n\t\t\tvar attr$1 = lastAttrsKeys[i$1];\n\n\t\t\tif (nextAttrsIsUndef || isNullOrUndefined(nextAttrs[attr$1])) {\n\t\t\t\tif (attr$1 === 'ref') {\n\t\t\t\t\tpatchRef(getRefInstance(node, instance), lastAttrs[attr$1], null, dom);\n\t\t\t\t} else {\n\t\t\t\t\tdom.removeAttribute(attr$1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nfunction patchStyle(lastAttrValue, nextAttrValue, dom) {\n\tif (isString(nextAttrValue)) {\n\t\tdom.style.cssText = nextAttrValue;\n\t} else if (isNullOrUndefined(lastAttrValue)) {\n\t\tif (!isNullOrUndefined(nextAttrValue)) {\n\t\t\tvar styleKeys = Object.keys(nextAttrValue);\n\n\t\t\tfor (var i = 0; i < styleKeys.length; i++) {\n\t\t\t\tvar style = styleKeys[i];\n\t\t\t\tvar value = nextAttrValue[style];\n\n\t\t\t\tif (isNumber(value) && !isUnitlessNumber[style]) {\n\t\t\t\t\tdom.style[style] = value + 'px';\n\t\t\t\t} else {\n\t\t\t\t\tdom.style[style] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (isNullOrUndefined(nextAttrValue)) {\n\t\tdom.removeAttribute('style');\n\t} else {\n\t\tvar styleKeys$1 = Object.keys(nextAttrValue);\n\n\t\tfor (var i$1 = 0; i$1 < styleKeys$1.length; i$1++) {\n\t\t\tvar style$1 = styleKeys$1[i$1];\n\t\t\tvar value$1 = nextAttrValue[style$1];\n\n\t\t\tif (isNumber(value$1) && !isUnitlessNumber[style$1]) {\n\t\t\t\tdom.style[style$1] = value$1 + 'px';\n\t\t\t} else {\n\t\t\t\tdom.style[style$1] = value$1;\n\t\t\t}\n\t\t}\n\t\tvar lastStyleKeys = Object.keys(lastAttrValue);\n\n\t\tfor (var i$2 = 0; i$2 < lastStyleKeys.length; i$2++) {\n\t\t\tvar style$2 = lastStyleKeys[i$2];\n\t\t\tif (isNullOrUndefined(nextAttrValue[style$2])) {\n\t\t\t\tdom.style[style$2] = '';\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction patchEvents(lastEvents, nextEvents, _lastEventKeys, _nextEventKeys, dom) {\n\tvar nextEventsDefined = !isNullOrUndefined(nextEvents);\n\tvar lastEventsDefined = !isNullOrUndefined(lastEvents);\n\tvar lastEventKeys;\n\n\tif (lastEventsDefined) {\n\t\tlastEventKeys = _lastEventKeys || Object.keys(lastEvents);\n\t}\n\tif (nextEventsDefined) {\n\t\tvar nextEventKeys = _nextEventKeys || Object.keys(nextEvents);\n\n\t\tif (lastEventsDefined) {\n\t\t\tfor (var i = 0; i < nextEventKeys.length; i++) {\n\t\t\t\tvar event = nextEventKeys[i];\n\t\t\t\tvar lastEvent = lastEvents[event];\n\t\t\t\tvar nextEvent = nextEvents[event];\n\n\t\t\t\tif (lastEvent !== nextEvent) {\n\t\t\t\t\tdom[event] = nextEvent;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i$1 = 0; i$1 < lastEventKeys.length; i$1++) {\n\t\t\t\tvar event$1 = lastEventKeys[i$1];\n\n\t\t\t\tif (isNullOrUndefined(nextEvents[event$1])) {\n\t\t\t\t\tdom[event$1] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmountEvents(nextEvents, nextEventKeys, dom);\n\t\t}\n\t} else if (lastEventsDefined) {\n\t\tremoveEvents(lastEvents, lastEventKeys, dom);\n\t}\n}\n\nfunction patchAttribute(attrName, lastAttrValue, nextAttrValue, dom) {\n\tif (attrName === 'dangerouslySetInnerHTML') {\n\t\tvar lastHtml = lastAttrValue && lastAttrValue.__html;\n\t\tvar nextHtml = nextAttrValue && nextAttrValue.__html;\n\n\t\tif (isNullOrUndefined(nextHtml)) {\n\t\t\tthrow new Error('Inferno Error: dangerouslySetInnerHTML requires an object with a __html propety containing the innerHTML content');\n\t\t}\n\t\tif (lastHtml !== nextHtml) {\n\t\t\tdom.innerHTML = nextHtml;\n\t\t}\n\t} else if (attrName === 'eventData') {\n\t\tdom.eventData = nextAttrValue;\n\t} else if (strictProps[attrName]) {\n\t\tdom[attrName] = nextAttrValue === null ? '' : nextAttrValue;\n\t} else {\n\t\tif (booleanProps[attrName]) {\n\t\t\tdom[attrName] = nextAttrValue ? true : false;\n\t\t} else {\n\t\t\tvar ns = namespaces[attrName];\n\n\t\t\tif (nextAttrValue === false || isNullOrUndefined(nextAttrValue)) {\n\t\t\t\tif (ns !== undefined) {\n\t\t\t\t\tdom.removeAttributeNS(ns, attrName);\n\t\t\t\t} else {\n\t\t\t\t\tdom.removeAttribute(attrName);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (ns !== undefined) {\n\t\t\t\t\tdom.setAttributeNS(ns, attrName, nextAttrValue === true ? attrName : nextAttrValue);\n\t\t\t\t} else {\n\t\t\t\t\tdom.setAttribute(attrName, nextAttrValue === true ? attrName : nextAttrValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction patchComponent(hasBlueprint, lastNode, Component, lastBp, nextBp, instance, lastProps, nextProps, nextHooks, lastChildren, nextChildren, parentDom, lifecycle, context) {\n\tnextProps = addChildrenToProps(nextChildren, nextProps);\n\n\tif (isStatefulComponent(Component)) {\n\t\tvar prevProps = instance.props;\n\t\tvar prevState = instance.state;\n\t\tvar nextState = instance.state;\n\n\t\tvar childContext = instance.getChildContext();\n\t\tif (!isNullOrUndefined(childContext)) {\n\t\t\tcontext = Object.assign({}, context, childContext);\n\t\t}\n\t\tinstance.context = context;\n\t\tvar nextNode = instance._updateComponent(prevState, nextState, prevProps, nextProps);\n\n\t\tif (nextNode === NO_RENDER) {\n\t\t\tnextNode = instance._lastNode;\n\t\t} else if (isNullOrUndefined(nextNode)) {\n\t\t\tnextNode = createVPlaceholder();\n\t\t}\n\t\tpatch(instance._lastNode, nextNode, parentDom, lifecycle, context, instance, null, false);\n\t\tlastNode.dom = nextNode.dom;\n\t\tinstance._lastNode = nextNode;\n\t\tinstance.componentDidUpdate(prevProps, prevState);\n\t\tcomponentToDOMNodeMap.set(instance, nextNode.dom);\n\t} else {\n\t\tvar shouldUpdate = true;\n\t\tvar nextHooksDefined = (hasBlueprint && nextBp.hasHooks === true) || !isNullOrUndefined(nextHooks);\n\n\t\tlastProps = addChildrenToProps(lastChildren, lastProps);\n\t\tif (nextHooksDefined && !isNullOrUndefined(nextHooks.componentShouldUpdate)) {\n\t\t\tshouldUpdate = nextHooks.componentShouldUpdate(lastNode.dom, lastProps, nextProps);\n\t\t}\n\t\tif (shouldUpdate !== false) {\n\t\t\tif (nextHooksDefined && !isNullOrUndefined(nextHooks.componentWillUpdate)) {\n\t\t\t\tnextHooks.componentWillUpdate(lastNode.dom, lastProps, nextProps);\n\t\t\t}\n\t\t\tvar nextNode$1 = Component(nextProps, context);\n\n\t\t\tif (isInvalidNode(nextNode$1)) {\n\t\t\t\tnextNode$1 = createVPlaceholder();\n\t\t\t}\n\t\t\tnextNode$1.dom = lastNode.dom;\n\t\t\tpatch(instance, nextNode$1, parentDom, lifecycle, context, null, null, false);\n\t\t\tlastNode.instance = nextNode$1;\n\t\t\tif (nextHooksDefined && !isNullOrUndefined(nextHooks.componentDidUpdate)) {\n\t\t\t\tnextHooks.componentDidUpdate(lastNode.dom, lastProps, nextProps);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction patchVList(lastVList, nextVList, parentDom, lifecycle, context, instance, isSVG) {\n\tvar lastItems = lastVList.items;\n\tvar nextItems = nextVList.items;\n\tvar pointer = lastVList.pointer;\n\n\tnextVList.dom = lastVList.dom;\n\tnextVList.pointer = pointer;\n\tif (!lastItems !== nextItems) {\n\t\tif (isKeyed(lastItems, nextItems)) {\n\t\t\tpatchKeyedChildren(lastItems, nextItems, parentDom, lifecycle, context, instance, isSVG, nextVList);\n\t\t} else {\n\t\t\tpatchNonKeyedChildren(lastItems, nextItems, parentDom, lifecycle, context, instance, isSVG, nextVList);\n\t\t}\n\t}\n}\n\nfunction patchNonKeyedChildren(lastChildren, nextChildren, dom, lifecycle, context, instance, isSVG, parentVList) {\n\tvar lastChildrenLength = lastChildren.length;\n\tvar nextChildrenLength = nextChildren.length;\n\tvar commonLength = lastChildrenLength > nextChildrenLength ? nextChildrenLength : lastChildrenLength;\n\tvar i = 0;\n\n\tfor (; i < commonLength; i++) {\n\t\tvar lastChild = lastChildren[i];\n\t\tvar nextChild = normaliseChild(nextChildren, i);\n\n\t\tpatch(lastChild, nextChild, dom, lifecycle, context, instance, isSVG);\n\t}\n\tif (lastChildrenLength < nextChildrenLength) {\n\t\tfor (i = commonLength; i < nextChildrenLength; i++) {\n\t\t\tvar child = normaliseChild(nextChildren, i);\n\n\t\t\tinsertOrAppend(dom, mount(child, null, lifecycle, context, instance, isSVG), parentVList && parentVList.pointer);\n\t\t}\n\t} else if (lastChildrenLength > nextChildrenLength) {\n\t\tfor (i = commonLength; i < lastChildrenLength; i++) {\n\t\t\tremove(lastChildren[i], dom);\n\t\t}\n\t}\n}\n\nfunction patchVFragment(lastVFragment, nextVFragment) {\n\tnextVFragment.dom = lastVFragment.dom;\n}\n\nfunction patchVText(lastVText, nextVText) {\n\tvar nextText = nextVText.text;\n\tvar dom = lastVText.dom;\n\n\tnextVText.dom = dom;\n\tif (lastVText.text !== nextText) {\n\t\tdom.nodeValue = nextText;\n\t}\n}\n\nfunction patchKeyedChildren(lastChildren, nextChildren, dom, lifecycle, context, instance, isSVG, parentVList) {\n\tvar lastChildrenLength = lastChildren.length;\n\tvar nextChildrenLength = nextChildren.length;\n\tvar lastEndIndex = lastChildrenLength - 1;\n\tvar nextEndIndex = nextChildrenLength - 1;\n\tvar lastStartIndex = 0;\n\tvar nextStartIndex = 0;\n\tvar lastStartNode = null;\n\tvar nextStartNode = null;\n\tvar nextEndNode = null;\n\tvar lastEndNode = null;\n\tvar nextNode;\n\n\twhile (lastStartIndex <= lastEndIndex && nextStartIndex <= nextEndIndex) {\n\t\tnextStartNode = nextChildren[nextStartIndex];\n\t\tlastStartNode = lastChildren[lastStartIndex];\n\n\t\tif (nextStartNode.key !== lastStartNode.key) {\n\t\t\tbreak;\n\t\t}\n\t\tpatchVNode(lastStartNode, nextStartNode, dom, lifecycle, context, instance, isSVG, false);\n\t\tnextStartIndex++;\n\t\tlastStartIndex++;\n\t}\n\twhile (lastStartIndex <= lastEndIndex && nextStartIndex <= nextEndIndex) {\n\t\tnextEndNode = nextChildren[nextEndIndex];\n\t\tlastEndNode = lastChildren[lastEndIndex];\n\n\t\tif (nextEndNode.key !== lastEndNode.key) {\n\t\t\tbreak;\n\t\t}\n\t\tpatchVNode(lastEndNode, nextEndNode, dom, lifecycle, context, instance, isSVG, false);\n\t\tnextEndIndex--;\n\t\tlastEndIndex--;\n\t}\n\twhile (lastStartIndex <= lastEndIndex && nextStartIndex <= nextEndIndex) {\n\t\tnextEndNode = nextChildren[nextEndIndex];\n\t\tlastStartNode = lastChildren[lastStartIndex];\n\n\t\tif (nextEndNode.key !== lastStartNode.key) {\n\t\t\tbreak;\n\t\t}\n\t\tnextNode = (nextEndIndex + 1 < nextChildrenLength) ? nextChildren[nextEndIndex + 1].dom : null;\n\t\tpatchVNode(lastStartNode, nextEndNode, dom, lifecycle, context, instance, isSVG, false);\n\t\tinsertOrAppend(dom, nextEndNode.dom, nextNode);\n\t\tnextEndIndex--;\n\t\tlastStartIndex++;\n\t}\n\twhile (lastStartIndex <= lastEndIndex && nextStartIndex <= nextEndIndex) {\n\t\tnextStartNode = nextChildren[nextStartIndex];\n\t\tlastEndNode = lastChildren[lastEndIndex];\n\n\t\tif (nextStartNode.key !== lastEndNode.key) {\n\t\t\tbreak;\n\t\t}\n\t\tnextNode = lastChildren[lastStartIndex].dom;\n\t\tpatchVNode(lastEndNode, nextStartNode, dom, lifecycle, context, instance, isSVG, false);\n\t\tinsertOrAppend(dom, nextStartNode.dom, nextNode);\n\t\tnextStartIndex++;\n\t\tlastEndIndex--;\n\t}\n\n\tif (lastStartIndex > lastEndIndex) {\n\t\tif (nextStartIndex <= nextEndIndex) {\n\t\t\tnextNode = (nextEndIndex + 1 < nextChildrenLength) ? nextChildren[nextEndIndex + 1].dom : parentVList && parentVList.pointer;\n\t\t\tfor (; nextStartIndex <= nextEndIndex; nextStartIndex++) {\n\t\t\t\tinsertOrAppend(dom, mount(nextChildren[nextStartIndex], null, lifecycle, context, instance, isSVG), nextNode);\n\t\t\t}\n\t\t}\n\t} else if (nextStartIndex > nextEndIndex) {\n\t\twhile (lastStartIndex <= lastEndIndex) {\n\t\t\tremove(lastChildren[lastStartIndex++], dom);\n\t\t}\n\t} else {\n\t\tvar aLength = lastEndIndex - lastStartIndex + 1;\n\t\tvar bLength = nextEndIndex - nextStartIndex + 1;\n\t\tvar sources = new Array(bLength);\n\n\t\t// Mark all nodes as inserted.\n\t\tvar i;\n\t\tfor (i = 0; i < bLength; i++) {\n\t\t\tsources[i] = -1;\n\t\t}\n\t\tvar moved = false;\n\t\tvar removeOffset = 0;\n\t\tvar lastTarget = 0;\n\t\tvar index;\n\t\tvar removed = true;\n\t\tvar k = 0;\n\n\t\tif ((bLength <= 4) || (aLength * bLength <= 16)) {\n\t\t\tfor (i = lastStartIndex; i <= lastEndIndex; i++) {\n\t\t\t\tremoved = true;\n\t\t\t\tlastEndNode = lastChildren[i];\n\t\t\t\tif (k < bLength) {\n\t\t\t\t\tfor (index = nextStartIndex; index <= nextEndIndex; index++) {\n\t\t\t\t\t\tnextEndNode = nextChildren[index];\n\t\t\t\t\t\tif (lastEndNode.key === nextEndNode.key) {\n\t\t\t\t\t\t\tsources[index - nextStartIndex] = i;\n\n\t\t\t\t\t\t\tif (lastTarget > index) {\n\t\t\t\t\t\t\t\tmoved = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlastTarget = index;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpatchVNode(lastEndNode, nextEndNode, dom, lifecycle, context, instance, isSVG, false);\n\t\t\t\t\t\t\tk++;\n\t\t\t\t\t\t\tremoved = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (removed) {\n\t\t\t\t\tremove(lastEndNode, dom);\n\t\t\t\t\tremoveOffset++;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar prevItemsMap = new Map();\n\n\t\t\tfor (i = nextStartIndex; i <= nextEndIndex; i++) {\n\t\t\t\tprevItemsMap.set(nextChildren[i].key, i);\n\t\t\t}\n\t\t\tfor (i = lastStartIndex; i <= lastEndIndex; i++) {\n\t\t\t\tremoved = true;\n\t\t\t\tlastEndNode = lastChildren[i];\n\n\t\t\t\tif (k < nextChildrenLength) {\n\t\t\t\t\tindex = prevItemsMap.get(lastEndNode.key);\n\n\t\t\t\t\tif (index !== undefined) {\n\t\t\t\t\t\tnextEndNode = nextChildren[index];\n\t\t\t\t\t\tsources[index - nextStartIndex] = i;\n\t\t\t\t\t\tif (lastTarget > index) {\n\t\t\t\t\t\t\tmoved = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlastTarget = index;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpatchVNode(lastEndNode, nextEndNode, dom, lifecycle, context, instance, isSVG, false);\n\t\t\t\t\t\tk++;\n\t\t\t\t\t\tremoved = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (removed) {\n\t\t\t\t\tremove(lastEndNode, dom);\n\t\t\t\t\tremoveOffset++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pos;\n\t\tif (moved) {\n\t\t\tvar seq = lis_algorithm(sources);\n\t\t\tindex = seq.length - 1;\n\t\t\tfor (i = bLength - 1; i >= 0; i--) {\n\t\t\t\tif (sources[i] === -1) {\n\t\t\t\t\tpos = i + nextStartIndex;\n\t\t\t\t\tnextNode = (pos + 1 < nextChildrenLength) ? nextChildren[pos + 1].dom : parentVList && parentVList.pointer;\n\t\t\t\t\tinsertOrAppend(dom, mount(nextChildren[pos], null, lifecycle, context, instance, isSVG), nextNode);\n\t\t\t\t} else {\n\t\t\t\t\tif (index < 0 || i !== seq[index]) {\n\t\t\t\t\t\tpos = i + nextStartIndex;\n\t\t\t\t\t\tnextNode = (pos + 1 < nextChildrenLength) ? nextChildren[pos + 1].dom : parentVList && parentVList.pointer;\n\t\t\t\t\t\tinsertOrAppend(dom, nextChildren[pos].dom, nextNode);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (aLength - removeOffset !== bLength) {\n\t\t\tfor (i = bLength - 1; i >= 0; i--) {\n\t\t\t\tif (sources[i] === -1) {\n\t\t\t\t\tpos = i + nextStartIndex;\n\t\t\t\t\tnextNode = (pos + 1 < nextChildrenLength) ? nextChildren[pos + 1].dom : parentVList && parentVList.pointer;\n\t\t\t\t\tinsertOrAppend(dom, mount(nextChildren[pos], null, lifecycle, context, instance, isSVG), nextNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n// https://en.wikipedia.org/wiki/Longest_increasing_subsequence\nfunction lis_algorithm(a) {\n\tvar p = a.slice(0);\n\tvar result = [];\n\tresult.push(0);\n\tvar i;\n\tvar j;\n\tvar u;\n\tvar v;\n\tvar c;\n\n\tfor (i = 0; i < a.length; i++) {\n\t\tif (a[i] === -1) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tj = result[result.length - 1];\n\t\tif (a[j] < a[i]) {\n\t\t\tp[i] = j;\n\t\t\tresult.push(i);\n\t\t\tcontinue;\n\t\t}\n\n\t\tu = 0;\n\t\tv = result.length - 1;\n\n\t\twhile (u < v) {\n\t\t\tc = ((u + v) / 2) | 0;\n\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\tu = c + 1;\n\t\t\t} else {\n\t\t\t\tv = c;\n\t\t\t}\n\t\t}\n\n\t\tif (a[i] < a[result[u]]) {\n\t\t\tif (u > 0) {\n\t\t\t\tp[i] = result[u - 1];\n\t\t\t}\n\t\t\tresult[u] = i;\n\t\t}\n\t}\n\n\tu = result.length;\n\tv = result[u - 1];\n\n\twhile (u-- > 0) {\n\t\tresult[u] = v;\n\t\tv = p[v];\n\t}\n\n\treturn result;\n}\n\nvar screenWidth = isBrowser && window.screen.width;\nvar screenHeight = isBrowser && window.screen.height;\nvar scrollX = 0;\nvar scrollY = 0;\nvar lastScrollTime = 0;\n\nif (isBrowser) {\n\twindow.onscroll = function () {\n\t\tscrollX = window.scrollX;\n\t\tscrollY = window.scrollY;\n\t\tlastScrollTime = performance.now();\n\t};\n\n\twindow.resize = function () {\n\t\tscrollX = window.scrollX;\n\t\tscrollY = window.scrollY;\n\t\tscreenWidth = window.screen.width;\n\t\tscreenHeight = window.screen.height;\n\t\tlastScrollTime = performance.now();\n\t};\n}\n\nfunction Lifecycle() {\n\tthis._listeners = [];\n\tthis.scrollX = null;\n\tthis.scrollY = null;\n\tthis.screenHeight = screenHeight;\n\tthis.screenWidth = screenWidth;\n}\n\nLifecycle.prototype = {\n\trefresh: function refresh() {\n\t\tthis.scrollX = isBrowser && window.scrollX;\n\t\tthis.scrollY = isBrowser && window.scrollY;\n\t},\n\taddListener: function addListener(callback) {\n\t\tthis._listeners.push(callback);\n\t},\n\ttrigger: function trigger() {\n\t\tvar this$1 = this;\n\n\t\tfor (var i = 0; i < this._listeners.length; i++) {\n\t\t\tthis$1._listeners[i]();\n\t\t}\n\t}\n};\n\nfunction handleLazyAttached(node, lifecycle, dom) {\n\tlifecycle.addListener(function () {\n\t\tvar rect = dom.getBoundingClientRect();\n\n\t\tif (lifecycle.scrollY === null) {\n\t\t\tlifecycle.refresh();\n\t\t}\n\t\tnode.clipData = {\n\t\t\ttop: rect.top + lifecycle.scrollY,\n\t\t\tleft: rect.left + lifecycle.scrollX,\n\t\t\tbottom: rect.bottom + lifecycle.scrollY,\n\t\t\tright: rect.right + lifecycle.scrollX,\n\t\t\tpending: false\n\t\t};\n\t});\n}\n\nfunction hydrateChild(child, childNodes, counter, parentDom, lifecycle, context, instance) {\n\tvar domNode = childNodes[counter.i];\n\n\tif (isVText(child)) {\n\t\tvar text = child.text;\n\n\t\tchild.dom = domNode;\n\t\tif (domNode.nodeType === 3 && text !== '') {\n\t\t\tdomNode.nodeValue = text;\n\t\t} else {\n\t\t\tvar newDomNode = mountVText(text);\n\n\t\t\treplaceNode(parentDom, newDomNode, domNode);\n\t\t\tchildNodes.splice(childNodes.indexOf(domNode), 1, newDomNode);\n\t\t\tchild.dom = newDomNode;\n\t\t}\n\t} else if (isVPlaceholder(child)) {\n\t\tchild.dom = domNode;\n\t} else if (isVList(child)) {\n\t\tvar items = child.items;\n\n\t\t// this doesn't really matter, as it won't be used again, but it's what it should be given the purpose of VList\n\t\tchild.dom = document.createDocumentFragment();\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tvar rebuild = hydrateChild(normaliseChild(items, i), childNodes, counter, parentDom, lifecycle, context, instance);\n\n\t\t\tif (rebuild) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t// at the end of every VList, there should be a \"pointer\". It's an empty TextNode used for tracking the VList\n\t\tvar pointer = childNodes[counter.i++];\n\n\t\tif (pointer && pointer.nodeType === 3) {\n\t\t\tchild.pointer = pointer;\n\t\t} else {\n\t\t\t// there is a problem, we need to rebuild this tree\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tvar rebuild$1 = hydrateNode(child, domNode, parentDom, lifecycle, context, instance, false);\n\n\t\tif (rebuild$1) {\n\t\t\treturn true;\n\t\t}\n\t}\n\tcounter.i++;\n}\n\nfunction getChildNodesWithoutComments(domNode) {\n\tvar childNodes = [];\n\tvar rawChildNodes = domNode.childNodes;\n\tvar length = rawChildNodes.length;\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar rawChild = rawChildNodes[i];\n\n\t\tif (rawChild.nodeType === 8) {\n\t\t\tif (rawChild.data === '!') {\n\t\t\t\tvar placeholder = document.createTextNode('');\n\n\t\t\t\tdomNode.replaceChild(placeholder, rawChild);\n\t\t\t\tchildNodes.push(placeholder);\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tdomNode.removeChild(rawChild);\n\t\t\t\tlength--;\n\t\t\t}\n\t\t} else {\n\t\t\tchildNodes.push(rawChild);\n\t\t\ti++;\n\t\t}\n\t}\n\treturn childNodes;\n}\n\nfunction hydrateComponent(node, Component, props, hooks, children, domNode, parentDom, lifecycle, context, lastInstance, isRoot) {\n\tprops = addChildrenToProps(children, props);\n\n\tif (isStatefulComponent(Component)) {\n\t\tvar instance = node.instance = new Component(props);\n\n\t\tinstance._patch = patch;\n\t\tif (!isNullOrUndefined(lastInstance) && props.ref) {\n\t\t\tmountRef(lastInstance, props.ref, instance);\n\t\t}\n\t\tvar childContext = instance.getChildContext();\n\n\t\tif (!isNullOrUndefined(childContext)) {\n\t\t\tcontext = Object.assign({}, context, childContext);\n\t\t}\n\t\tinstance.context = context;\n\t\tinstance._unmounted = false;\n\t\tinstance._parentNode = node;\n\t\tif (lastInstance) {\n\t\t\tinstance._parentComponent = lastInstance;\n\t\t}\n\t\tinstance._pendingSetState = true;\n\t\tinstance.componentWillMount();\n\t\tvar nextNode = instance.render();\n\n\t\tinstance._pendingSetState = false;\n\t\tif (isInvalidNode(nextNode)) {\n\t\t\tnextNode = createVPlaceholder();\n\t\t}\n\t\thydrateNode(nextNode, domNode, parentDom, lifecycle, context, instance, isRoot);\n\t\tinstance._lastNode = nextNode;\n\t\tinstance.componentDidMount();\n\n\t} else {\n\t\tvar instance$1 = node.instance = Component(props);\n\n\t\tif (!isNullOrUndefined(hooks)) {\n\t\t\tif (!isNullOrUndefined(hooks.componentWillMount)) {\n\t\t\t\thooks.componentWillMount(null, props);\n\t\t\t}\n\t\t\tif (!isNullOrUndefined(hooks.componentDidMount)) {\n\t\t\t\tlifecycle.addListener(function () {\n\t\t\t\t\thooks.componentDidMount(domNode, props);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn hydrateNode(instance$1, domNode, parentDom, lifecycle, context, instance$1, isRoot);\n\t}\n}\n\nfunction hydrateNode(node, domNode, parentDom, lifecycle, context, instance, isRoot) {\n\tvar bp = node.bp;\n\tvar tag = node.tag || bp.tag;\n\n\tif (isFunction(tag)) {\n\t\tnode.dom = domNode;\n\t\thydrateComponent(node, tag, node.attrs || {}, node.hooks, node.children, domNode, parentDom, lifecycle, context, instance, isRoot);\n\t} else {\n\t\tif (\n\t\t\tdomNode.nodeType !== 1 ||\n\t\t\ttag !== domNode.tagName.toLowerCase()\n\t\t) {\n\t\t\t// TODO remake node\n\t\t} else {\n\t\t\tnode.dom = domNode;\n\t\t\tvar hooks = node.hooks;\n\n\t\t\tif ((bp && bp.hasHooks === true) || !isNullOrUndefined(hooks)) {\n\t\t\t\thandleAttachedHooks(hooks, lifecycle, domNode);\n\t\t\t}\n\t\t\tvar children = node.children;\n\n\t\t\tif (!isNullOrUndefined(children)) {\n\t\t\t\tif (isStringOrNumber(children)) {\n\t\t\t\t\tif (domNode.textContent !== children) {\n\t\t\t\t\t\tdomNode.textContent = children;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar childNodes = getChildNodesWithoutComments(domNode);\n\t\t\t\t\tvar counter = { i: 0 };\n\t\t\t\t\tvar rebuild = false;\n\n\t\t\t\t\tif (isArray(children)) {\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\trebuild = hydrateChild(normaliseChild(children, i), childNodes, counter, domNode, lifecycle, context, instance);\n\n\t\t\t\t\t\t\tif (rebuild) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (childNodes.length === 1) {\n\t\t\t\t\t\t\trebuild = hydrateChild(children, childNodes, counter, domNode, lifecycle, context, instance);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trebuild = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rebuild) {\n\t\t\t\t\t\t// TODO scrap children and rebuild again\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar className = node.className;\n\t\t\tvar style = node.style;\n\n\t\t\tif (!isNullOrUndefined(className)) {\n\t\t\t\tdomNode.className = className;\n\t\t\t}\n\t\t\tif (!isNullOrUndefined(style)) {\n\t\t\t\tpatchStyle(null, style, domNode);\n\t\t\t}\n\t\t\tif (bp && bp.hasAttrs === true) {\n\t\t\t\tmountBlueprintAttrs(node, bp, domNode, instance);\n\t\t\t} else {\n\t\t\t\tvar attrs = node.attrs;\n\n\t\t\t\tif (!isNullOrUndefined(attrs)) {\n\t\t\t\t\thandleSelects(node);\n\t\t\t\t\tmountAttributes(node, attrs, Object.keys(attrs), domNode, instance);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (bp && bp.hasEvents === true) {\n\t\t\t\tmountBlueprintEvents(node, bp, domNode);\n\t\t\t} else {\n\t\t\t\tvar events = node.events;\n\n\t\t\t\tif (!isNullOrUndefined(events)) {\n\t\t\t\t\tmountEvents(events, Object.keys(events), domNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nvar documetBody = isBrowser ? document.body : null;\n\nfunction hydrate(node, parentDom, lifecycle) {\n\tif (parentDom && parentDom.nodeType === 1) {\n\t\tvar rootNode = parentDom.querySelector('[data-infernoroot]');\n\n\t\tif (rootNode && rootNode.parentNode === parentDom) {\n\t\t\thydrateNode(node, rootNode, parentDom, lifecycle, {}, true);\n\t\t\treturn true;\n\t\t}\n\t}\n\t// clear parentDom, unless it's document.body\n\tif (parentDom !== documetBody) {\n\t\tparentDom.textContent = '';\n\t} else {\n\t\tconsole.warn('Inferno Warning: rendering to the \"document.body\" is dangerous! Use a dedicated container element instead.');\n\t}\n\treturn false;\n}\n\nvar roots = new Map();\nvar componentToDOMNodeMap = new Map();\n\nfunction findDOMNode(domNode) {\n\treturn componentToDOMNodeMap.get(domNode) || null;\n}\n\nfunction render(input, parentDom) {\n\tvar root = roots.get(parentDom);\n\tvar lifecycle = new Lifecycle();\n\n\tif (isUndefined(root)) {\n\t\tif (!isInvalidNode(input)) {\n\t\t\tif (!hydrate(input, parentDom, lifecycle)) {\n\t\t\t\tmount(input, parentDom, lifecycle, {}, null, false);\n\t\t\t}\n\t\t\tlifecycle.trigger();\n\t\t\troots.set(parentDom, { input: input });\n\t\t}\n\t} else {\n\t\tvar activeNode = getActiveNode();\n\t\tvar nextInput = patch(root.input, input, parentDom, lifecycle, {}, null, false);\n\n\t\tlifecycle.trigger();\n\t\tif (isNull(input)) {\n\t\t\troots.delete(parentDom);\n\t\t}\n\t\troot.input = nextInput;\n\t\tresetActiveNode(activeNode);\n\t}\n}\n\nvar index = {\n\trender: render,\n\tfindDOMNode: findDOMNode,\n\tmount: mount,\n\tpatch: patch,\n\tunmount: unmount\n};\n\nreturn index;\n\n})));","'use strict';\n\nmodule.exports = require('inferno/dist/inferno-dom');","/*!\n * inferno v0.7.27\n * (c) 2016 Dominic Gannaway\n * Released under the MIT License.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Inferno = factory());\n}(this, (function () { 'use strict';\n\n// Runs only once in applications lifetime\nvar isBrowser = typeof window !== 'undefined' && window.document;\n\nfunction isNullOrUndefined(obj) {\n\treturn isUndefined(obj) || isNull(obj);\n}\n\nfunction isAttrAnEvent$1(attr) {\n\treturn attr[0] === 'o' && attr[1] === 'n' && attr.length > 3;\n}\n\nfunction isNull(obj) {\n\treturn obj === null;\n}\n\nfunction isUndefined(obj) {\n\treturn obj === undefined;\n}\n\nfunction VNode(blueprint) {\n\tthis.bp = blueprint;\n\tthis.dom = null;\n\tthis.instance = null;\n\tthis.tag = null;\n\tthis.children = null;\n\tthis.style = null;\n\tthis.className = null;\n\tthis.attrs = null;\n\tthis.events = null;\n\tthis.hooks = null;\n\tthis.key = null;\n\tthis.clipData = null;\n}\n\nVNode.prototype = {\n\tsetAttrs: function setAttrs(attrs) {\n\t\tthis.attrs = attrs;\n\t\treturn this;\n\t},\n\tsetTag: function setTag(tag) {\n\t\tthis.tag = tag;\n\t\treturn this;\n\t},\n\tsetStyle: function setStyle(style) {\n\t\tthis.style = style;\n\t\treturn this;\n\t},\n\tsetClassName: function setClassName(className) {\n\t\tthis.className = className;\n\t\treturn this;\n\t},\n\tsetChildren: function setChildren(children) {\n\t\tthis.children = children;\n\t\treturn this;\n\t},\n\tsetHooks: function setHooks(hooks) {\n\t\tthis.hooks = hooks;\n\t\treturn this;\n\t},\n\tsetEvents: function setEvents(events) {\n\t\tthis.events = events;\n\t\treturn this;\n\t},\n\tsetKey: function setKey(key) {\n\t\tthis.key = key;\n\t\treturn this;\n\t}\n};\n\nfunction createVNode(bp) {\n\treturn new VNode(bp);\n}\n\nfunction isAttrAnEvent(attr) {\n\treturn attr[0] === 'o' && attr[1] === 'n' && attr.length > 3;\n}\n\nfunction isAttrAHook(hook) {\n\treturn hook === 'onCreated'\n\t\t|| hook === 'onAttached'\n\t\t|| hook === 'onWillDetach'\n\t\t|| hook === 'onWillUpdate'\n\t\t|| hook === 'onDidUpdate';\n}\n\nfunction isAttrAComponentHook(hook) {\n\treturn hook === 'onComponentWillMount'\n\t\t|| hook === 'onComponentDidMount'\n\t\t|| hook === 'onComponentWillUnmount'\n\t\t|| hook === 'onComponentShouldUpdate'\n\t\t|| hook === 'onComponentWillUpdate'\n\t\t|| hook === 'onComponentDidUpdate';\n}\n\n\nfunction createBlueprint(shape, childrenType) {\n\tvar tag = shape.tag || null;\n\tvar tagIsDynamic = tag && tag.arg !== undefined ? true : false;\n\n\tvar children = isNullOrUndefined(shape.children) ? null : shape.children;\n\tvar childrenIsDynamic = children && children.arg !== undefined ? true : false;\n\n\tvar attrs = shape.attrs || null;\n\tvar attrsIsDynamic = attrs && attrs.arg !== undefined ? true : false;\n\n\tvar hooks = shape.hooks || null;\n\tvar hooksIsDynamic = hooks && hooks.arg !== undefined ? true : false;\n\n\tvar events = shape.events || null;\n\tvar eventsIsDynamic = events && events.arg !== undefined ? true : false;\n\n\tvar key = shape.key === undefined ? null : shape.key;\n\tvar keyIsDynamic = !isNullOrUndefined(key) && !isNullOrUndefined(key.arg);\n\n\tvar style = shape.style || null;\n\tvar styleIsDynamic = style && style.arg !== undefined ? true : false;\n\n\tvar className = shape.className === undefined ? null : shape.className;\n\tvar classNameIsDynamic = className && className.arg !== undefined ? true : false;\n\n\tvar spread = shape.spread === undefined ? null : shape.spread;\n\tvar hasSpread = shape.spread !== undefined;\n\n\tvar blueprint = {\n\t\tlazy: shape.lazy || false,\n\t\tdom: null,\n\t\tpool: [],\n\t\ttag: tagIsDynamic ? null : tag,\n\t\tclassName: className !== '' && className ? className : null,\n\t\tstyle: style !== '' && style ? style : null,\n\t\tisComponent: tagIsDynamic,\n\t\thasAttrs: attrsIsDynamic || (attrs ? true : false),\n\t\thasHooks: hooksIsDynamic,\n\t\thasEvents: eventsIsDynamic,\n\t\thasStyle: styleIsDynamic || (style !== '' && style ? true : false),\n\t\thasClassName: classNameIsDynamic || (className !== '' && className ? true : false),\n\t\tchildrenType: childrenType === undefined ? (children ? 5 : 0) : childrenType,\n\t\tattrKeys: null,\n\t\teventKeys: null,\n\t\tisSVG: shape.isSVG || false\n\t};\n\n\treturn function () {\n\t\tvar vNode = new VNode(blueprint);\n\n\t\tif (tagIsDynamic === true) {\n\t\t\tvNode.tag = arguments[tag.arg];\n\t\t}\n\t\tif (childrenIsDynamic === true) {\n\t\t\tvNode.children = arguments[children.arg];\n\t\t}\n\t\tif (hasSpread) {\n\t\t\tvar _spread = arguments[spread.arg];\n\t\t\tvar attrs$1;\n\t\t\tvar events$1;\n\t\t\tvar hooks$1;\n\t\t\tvar attrKeys = [];\n\t\t\tvar eventKeys = [];\n\n\t\t\tfor (var prop in _spread) {\n\t\t\t\tvar value = _spread[prop];\n\n\t\t\t\tif (prop === 'className' || (prop === 'class' && !blueprint.isSVG)) {\n\t\t\t\t\tvNode.className = value;\n\t\t\t\t\tblueprint.hasClassName = true;\n\t\t\t\t} else if (prop === 'style') {\n\t\t\t\t\tvNode.style = value;\n\t\t\t\t\tblueprint.hasStyle = true;\n\t\t\t\t} else if (prop === 'key') {\n\t\t\t\t\tvNode.key = value;\n\t\t\t\t} else if (isAttrAHook(prop) || isAttrAComponentHook(prop)) {\n\t\t\t\t\tif (!hooks$1) {\n\t\t\t\t\t\thooks$1 = {};\n\t\t\t\t\t}\n\t\t\t\t\thooks$1[prop[2].toLowerCase() + prop.substring(3)] = value;\n\t\t\t\t} else if (isAttrAnEvent(prop)) {\n\t\t\t\t\tif (!events$1) {\n\t\t\t\t\t\tevents$1 = {};\n\t\t\t\t\t}\n\t\t\t\t\teventKeys.push(prop.toLowerCase());\n\t\t\t\t\tevents$1[prop.toLowerCase()] = value;\n\t\t\t\t} else if (prop === 'children') {\n\t\t\t\t\tvNode.children = value;\n\t\t\t\t\tblueprint.childrenType = blueprint.childrenType || 5;\n\t\t\t\t} else {\n\t\t\t\t\tif (!attrs$1) {\n\t\t\t\t\t\tattrs$1 = {};\n\t\t\t\t\t}\n\t\t\t\t\tattrKeys.push(prop);\n\t\t\t\t\tattrs$1[prop] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (attrs$1) {\n\t\t\t\tvNode.attrs = attrs$1;\n\t\t\t\tblueprint.attrKeys = attrKeys;\n\t\t\t\tblueprint.hasAttrs = true;\n\t\t\t}\n\t\t\tif (events$1) {\n\t\t\t\tvNode.events = events$1;\n\t\t\t\tblueprint.eventKeys = eventKeys;\n\t\t\t\tblueprint.hasEvents = true;\n\t\t\t}\n\t\t\tif (hooks$1) {\n\t\t\t\tvNode.hooks = hooks$1;\n\t\t\t\tblueprint.hasHooks = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (attrsIsDynamic === true) {\n\t\t\t\tvNode.attrs = arguments[attrs.arg];\n\t\t\t} else {\n\t\t\t\tvNode.attrs = attrs;\n\t\t\t}\n\t\t\tif (hooksIsDynamic === true) {\n\t\t\t\tvNode.hooks = arguments[hooks.arg];\n\t\t\t}\n\t\t\tif (eventsIsDynamic === true) {\n\t\t\t\tvNode.events = arguments[events.arg];\n\t\t\t}\n\t\t\tif (keyIsDynamic === true) {\n\t\t\t\tvNode.key = arguments[key.arg];\n\t\t\t} else {\n\t\t\t\tvNode.key = key;\n\t\t\t}\n\t\t\tif (styleIsDynamic === true) {\n\t\t\t\tvNode.style = arguments[style.arg];\n\t\t\t} else {\n\t\t\t\tvNode.style = blueprint.style;\n\t\t\t}\n\t\t\tif (classNameIsDynamic === true) {\n\t\t\t\tvNode.className = arguments[className.arg];\n\t\t\t} else {\n\t\t\t\tvNode.className = blueprint.className;\n\t\t\t}\n\t\t}\n\t\treturn vNode;\n\t};\n}\n\nfunction VText(text) {\n\tthis.text = text;\n\tthis.dom = null;\n}\n\nfunction createVText(text) {\n\treturn new VText(text);\n}\n\n// Copy of the util from dom/util, otherwise it makes massive bundles\nfunction documentCreateElement(tag, isSVG) {\n\tvar dom;\n\n\tif (isSVG === true) {\n\t\tdom = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\t} else {\n\t\tdom = document.createElement(tag);\n\t}\n\treturn dom;\n}\n\nfunction createUniversalElement(tag, attrs, isSVG) {\n\tif (isBrowser) {\n\t\tvar dom = documentCreateElement(tag, isSVG);\n\t\tif (attrs) {\n\t\t\tcreateStaticAttributes(attrs, dom);\n\t\t}\n\t\treturn dom;\n\t}\n\treturn null;\n}\n\nfunction createStaticAttributes(attrs, dom) {\n\tvar attrKeys = Object.keys(attrs);\n\n\tfor (var i = 0; i < attrKeys.length; i++) {\n\t\tvar attr = attrKeys[i];\n\t\tvar value = attrs[attr];\n\n\t\tif (attr === 'className') {\n\t\t\tdom.className = value;\n\t\t} else {\n\t\t\tif (value === true) {\n\t\t\t\tdom.setAttribute(attr, attr);\n\t\t\t} else if (!isNullOrUndefined(value) && value !== false && !isAttrAnEvent$1(attr)) {\n\t\t\t\tdom.setAttribute(attr, value);\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar index = {\n\tcreateBlueprint: createBlueprint,\n\tcreateVNode: createVNode,\n\tcreateVText: createVText,\n\tuniversal: {\n\t\tcreateElement: createUniversalElement\n\t}\n};\n\nreturn index;\n\n})));","'use strict';\n\nmodule.exports = require('inferno/dist/inferno');","'use strict'\n\nimport './styles/Alert.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nexport const Alert = (model) => {\n  let content = <div />\n\n  const className = model.success ? 'alert success' : 'alert error'\n\n  content = (\n    <div className={className}>\n      <span>{model.message}</span>\n      <a href='#' onClick={model.dismissHandler}>&times;</a>\n    </div>\n  )\n\n  return content\n}\n","'use strict'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { switchToTab } from '../sam/actions'\n\nexport const TabItem = (tabInfo) => {\n  const selectedClass = tabInfo.active ? 'selected' : ''\n\n  return (\n    <li role='presentation' className={selectedClass}>\n      <a href='#' onClick={() => switchToTab(tabInfo.name)} aria-controls={tabInfo.name} role='tab' data-toggle='tab'>{tabInfo.name}</a>\n    </li>\n  )\n}\n","'use strict'\n\nexports.transformFormIntoPayload = (formElements, payload) => {\n  for (let i = 0; i < formElements.length; i++) {\n    const formEl = formElements[i]\n    let alreadyContainsEl = false\n\n    if (formEl.type === 'radio' && formEl.checked) {\n      payload[formEl.name] = formElements[formEl.name].value\n    }\n\n    if (formEl.type !== 'radio') {\n      if (typeof payload[formEl.name] !== 'undefined' && !Array.isArray(payload[formEl.name])) {\n        alreadyContainsEl = true\n\n        const originalValue = payload[formEl.name]\n        delete payload[formEl.name]\n\n        payload[formEl.name] = []\n        payload[formEl.name].push(originalValue)\n      }\n\n      if (Array.isArray(payload[formEl.name])) {\n        alreadyContainsEl = true\n      }\n\n      const value = (formEl.type === 'checkbox') ? formEl.checked : formEl.value\n      if (alreadyContainsEl) {\n        payload[formEl.name].push(value)\n      } else {\n        payload[formEl.name] = value\n      }\n    }\n  }\n}\n","'use strict'\n\nimport './styles/forms.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { save } from '../sam/actions'\nimport { transformFormIntoPayload } from './utils'\n\nexport const CiTabContent = (model) => {\n  const handleCiToolChange = (event) => {\n    const el = event.currentTarget\n    el.parentElement.classList.remove(el.parentElement.classList.item(2))\n    el.parentElement.classList.add(el.value)\n\n    const inputEls = el.parentElement.getElementsByTagName('input')\n    for (let i = 0; i < inputEls.length; i++) {\n      inputEls[i].required = (inputEls[i].offsetParent !== null)\n    }\n  }\n\n  const handleFormSubmit = (event) => {\n    let postData = { save: 'ci', payload: {} }\n    transformFormIntoPayload(event.currentTarget.elements, postData.payload)\n    return save(postData)\n  }\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <div className={`form-container vertical ${model.configuration.tool}`}>\n        <label for='ciTool'><span>CI tool</span> you are using</label>\n        <select required id='ciTool' name='ciTool' value={model.configuration.tool} onChange={handleCiToolChange}>\n          <option value='jenkins'>Jenkins</option>\n          <option value='circleci'>Circle CI</option>\n          <option value='buildkite'>Buildkite</option>\n          <option value='travisci'>Travis CI</option>\n        </select>\n        <div className='fieldset'>\n          <label for='ciAddress'>Address of the <span>CI server you want to connect to</span></label>\n          <input type='text' id='ciAddress' placeholder='http://myci.mycompany' name='ciAddress' value={model.configuration.address} />\n        </div>\n        <div className='fieldset'>\n          <label for='ciUsername' name='ciUsernameBuildkite'>Organization Slug</label>\n          <label for='ciUsername' name='ciUsernameCircleCi'>Team Name</label>\n          <label for='ciUsername' name='ciUsernameTravis'>Account</label>\n          <input type='text' id='ciUsername' name='ciUsername' value={model.configuration.username} />\n        </div>\n        <div className='fieldset'>\n          <label for='ciApiToken'>API token</label>\n          <input type='text' id='ciApiToken' placeholder='' name='ciApiToken' value={model.configuration.apiToken} />\n        </div>\n      </div>\n      <div className='actions'>\n        <button type='submit'>Save</button>\n        <small>Last updated: {model.lastUpdated}</small>\n      </div>\n    </form>\n  )\n}\n","'use strict'\n\nimport './styles/forms.css'\nimport './styles/jobs.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nexport const Job = (props) => {\n  const handleRemoveJob = (e) => { e.currentTarget.parentElement.remove() }\n\n  return (\n    <div className='fieldset'>\n      <input type='checkbox' name='jobActive' id={`jobActive_${props.index}`} checked={props.active} value={`jobActive_${props.index}`} />\n      <label for={`jobActive_${props.index}`}><span><span /></span>&nbsp;</label>\n      <input type='text' name='jobName' id={`jobName_${props.index}`} value={props.name} />\n      <button type='button' className='small danger' onClick={handleRemoveJob}>Remove</button>\n    </div>\n  )\n}\n","'use strict'\n\nimport './styles/forms.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { Job } from './Job'\nimport { addNewJob, save } from '../sam/actions'\nimport { transformFormIntoPayload } from './utils'\n\nexport const JobsTabContent = (model) => {\n  const handleFormSubmit = (event) => {\n    let postData = { save: 'jobs', payload: {} }\n    transformFormIntoPayload(event.currentTarget.elements, postData.payload)\n    return save(postData)\n  }\n\n  const handleAddNewJob = (event) => {\n    addNewJob()\n  }\n\n  const jobs = model.configuration.items.map((i, idx) => <Job name={i.name} active={i.active} index={idx} />)\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <div className='form-container vertical'>\n        <label for='pollRate'>Rate to <span>poll your CI server</span> (in seconds)</label>\n        <input type='number' name='pollRate' id='pollRate' value={model.configuration.pollrate} />\n      </div>\n      <div className='jobs-container form-container vertical'>\n        <label><span>Jobs to monitor</span></label>\n        {jobs}\n        <button type='button' className='small secondary' onClick={handleAddNewJob}>Add new job</button>\n      </div>\n      <div className='actions'>\n        <button type='submit'>Save</button>\n        <small>Last updated: {model.lastUpdated}</small>\n      </div>\n    </form>\n  )\n}\n","'use strict'\n\nimport './styles/forms.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { save } from '../sam/actions'\nimport { transformFormIntoPayload } from './utils'\n\nexport const NetworkTabContent = (model) => {\n  const handleConnectionTypeChange = (event) => {\n    const formEl = event.currentTarget.parentNode.parentNode.parentNode\n    const wifiConfEl = formEl.getElementsByClassName('wireless-connection')[0]\n\n    if (event.currentTarget.value === 'wireless') {\n      wifiConfEl.classList.remove('hidden')\n      wifiConfEl.classList.add('shown')\n    } else {\n      wifiConfEl.classList.remove('shown')\n      wifiConfEl.classList.add('hidden')\n    }\n  }\n\n  const handleDhcpChange = (event) => {\n    const formEl = event.currentTarget.parentNode.parentNode.parentNode\n    const staticEl = formEl.getElementsByClassName('static-configuration')[0]\n\n    if (event.currentTarget.value === 'false') {\n      staticEl.classList.remove('hidden')\n      staticEl.classList.add('shown')\n    } else {\n      staticEl.classList.remove('shown')\n      staticEl.classList.add('hidden')\n    }\n  }\n\n  const handleFormSubmit = (event) => {\n    let postData = { save: 'network', payload: {} }\n    transformFormIntoPayload(event.currentTarget.elements, postData.payload)\n    return save(postData)\n  }\n\n  const wirelessContainerHidden = (model.configuration.connectionType !== 'wireless' ? 'hidden' : 'shown')\n  const staticContainerHidden = (model.configuration.dhcp === true ? 'hidden' : 'shown')\n\n  return (\n    <form name='networkForm' onSubmit={handleFormSubmit}>\n      <div className='form-container vertical'>\n        <label for='hostname'>Name of <span>this device</span> on the network</label>\n        <input className='full-length' required type='text' id='hostname' name='hostname' placeholder='e.g. mycompany-build-lights' value={model.configuration.hostname} />\n      </div>\n      <div className='form-container vertical'>\n        <div className='fieldset'>\n          <label>Select your <span>preferred connection type</span></label>\n          <div className='controls'>\n            <input type='radio' name='connectionType' checked={model.configuration.connectionType === 'wireless' ? 'checked' : ''} value='wireless' id='wireless' onChange={handleConnectionTypeChange} />\n            <label for='wireless'><span><span /></span>Wireless</label>\n            <input type='radio' name='connectionType' checked={model.configuration.connectionType === 'ethernet' ? 'checked' : ''} value='ethernet' id='ethernet' onChange={handleConnectionTypeChange} />\n            <label for='ethernet'><span><span /></span>Ethernet</label>\n          </div>\n        </div>\n        <div className={`wireless-connection ${wirelessContainerHidden}`}>\n          <div className='fieldset'>\n            <label for='ssid'>SSID</label>\n            <input type='text' id='ssid' name='ssid' value={model.configuration.wireless.ssid} />\n          </div>\n          <div className='fieldset'>\n            <label for='key'>Password</label>\n            <input type='password' id='key' name='key' value={model.configuration.wireless.key} />\n          </div>\n          <label className='checkbox'>\n            <input type='checkbox' id='hidden' name='hidden' value={model.configuration.wireless.hidden} checked={model.configuration.wireless.hidden ? 'checked' : ''} />\n            <label for='hidden'><span><span /></span>Hidden network?</label>\n          </label>\n        </div>\n      </div>\n      <div className='form-container vertical'>\n        <div className='fieldset'>\n          <label>Assign network <span>IP address</span></label>\n          <div className='controls'>\n            <input type='radio' name='useDhcp' checked={!model.configuration.dhcp ? 'checked' : ''} value='false' id='yes' onChange={handleDhcpChange} />\n            <label for='yes'><span><span /></span>Yes</label>\n            <input type='radio' name='useDhcp' checked={model.configuration.dhcp ? 'checked' : ''} value='true' id='no' onChange={handleDhcpChange} />\n            <label for='no'><span><span /></span>No</label>\n          </div>\n        </div>\n        <div className={`static-configuration ${staticContainerHidden}`}>\n          <div className='fieldset'>\n            <label for='address'>Address</label>\n            <input type='text' name='address' id='address' value={model.configuration.address} placeholder='192.168.0.10/24' />\n          </div>\n          <div className='fieldset'>\n            <label for='gateway'>Gateway</label>\n            <input type='text' name='gateway' id='gateway' value={model.configuration.gateway} placeholder='192.168.0.1' />\n          </div>\n        </div>\n      </div>\n      <div className='actions'>\n        <button type='submit'>Save</button>\n        <small>Last updated: {model.lastUpdated}</small>\n      </div>\n    </form>\n  )\n}\n","'use strict'\n\nimport './styles/forms.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { save } from '../sam/actions'\nimport { transformFormIntoPayload } from './utils'\n\nexport const LedHardwareTabContent = (model) => {\n  const handleFormSubmit = (event) => {\n    let postData = { save: 'led', payload: {} }\n    transformFormIntoPayload(event.currentTarget.elements, postData.payload)\n    return save(postData)\n  }\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <div className='form-container vertical'>\n        <label for='ledType'>Which <span>LED strip</span> you are using</label>\n        <select required id='ledType' name='ledType' value={model.configuration.ledType}>\n          <option value='epistar_lpd8806'>Epistar LPD8806</option>\n          <option value='adafruit_lpd8806'>Adafruit LPD8806</option>\n        </select>\n        <label for='numLeds'>Number of LEDs on your strip</label>\n        <input type='number' required id='numLeds' name='numLeds' value={model.configuration.numLeds} />\n      </div>\n      <div className='actions'>\n        <button type='submit'>Save</button>\n        <small>Last updated: {model.lastUpdated}</small>\n      </div>\n    </form>\n  )\n}\n","'use strict'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { CiTabContent } from './CiTabContent'\nimport { JobsTabContent } from './JobsTabContent'\nimport { NetworkTabContent } from './NetworkTabContent'\nimport { LedHardwareTabContent } from './LedHardwareTabContent'\n\nexport const TabContent = (tabInfo) => {\n  const displayClass = !tabInfo.active ? 'hidden tab-content-container' : 'tab-content-container'\n  let content\n\n  switch (tabInfo.name) {\n    case 'network':\n      content = NetworkTabContent(tabInfo)\n      break\n    case 'ci server':\n      content = CiTabContent(tabInfo)\n      break\n    case 'led hardware':\n      content = LedHardwareTabContent(tabInfo)\n      break\n    case 'jobs to monitor':\n      content = JobsTabContent(tabInfo)\n      break\n    default:\n      content = 'Nothing to see here.'\n  }\n\n  return (\n    <div className={displayClass}>{content}</div>\n  )\n}\n","'use strict'\n\nimport './styles/Tab.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { Alert } from './Alert'\nimport { TabItem } from './TabItem'\nimport { TabContent } from './TabContent'\n\nimport { dismissAlert } from '../sam/actions'\n\nexport const Tab = (model) => {\n  const tabs = model.map(TabItem)\n  const tabContent = model.filter(tool => tool.active).map(TabContent)\n\n  const dismissHandler = (e) => {\n    delete model.alert\n    return dismissAlert(model)\n  }\n\n  let alert = ''\n  if (model.alert) {\n    alert = <Alert success={model.alert.success} message={model.alert.message} dismissHandler={dismissHandler} />\n  }\n\n  return (\n    <div className='tab'>\n      <div className='tab-nav-container'>\n        <ul className='container'>\n          {tabs}\n        </ul>\n      </div>\n      <div className='tab-content container'>\n        {alert}\n        {tabContent}\n      </div>\n    </div>\n  )\n}\n","'use strict'\n\nimport './styles/Header.css'\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { reboot, shutdown } from '../sam/actions'\n\nexport const Header = (model) => {\n  const supervisorHref = `http://${location.hostname}:9001`\n\n  const rebootDevice = () => reboot()\n  const shutdownDevice = () => shutdown()\n\n  let deviceActionsMenu = (\n    <div class='device-actions'>\n      <button type='button' aria-haspopup='true'>Menu</button>\n      <ul class='dropdown-device-actions'>\n        <li>\n          <a href='#' onClick={rebootDevice}>Reboot</a>\n        </li>\n        <li>\n          <a href='#' onClick={shutdownDevice}>Shutdown</a>\n        </li>\n        <li class='separator'>\n          <div />\n        </li>\n        <li>\n          <a id='supervisor' target='_blank' href={supervisorHref}>Supervisor</a>\n        </li>\n      </ul>\n    </div>\n  )\n  if (model.reboot || model.shutdown) {\n    deviceActionsMenu = ''\n  }\n\n  return (\n    <header>\n      <div class='container'>\n        <span>Build Lights</span>\n        {deviceActionsMenu}\n      </div>\n    </header>\n  )\n}\n","'use strict'\nimport './styles/Footer.css'\nimport Inferno from 'inferno' // eslint-disable-line\n\nexport const Footer = () => {\n  return (\n    <footer>\n      <div><a href='http://www.dius.com.au' target='_blank' title='DiUS'>DiUS</a> &copy; 2016 - All rights reserved.</div>\n      <div>Icons made by <a href='http://www.flaticon.com/authors/gregor-cresnar' title='Gregor Cresnar'>Gregor Cresnar</a> from <a href='http://www.flaticon.com' title='Flaticon'>www.flaticon.com</a> is licensed by <a href='http://creativecommons.org/licenses/by/3.0/' title='Creative Commons BY 3.0' target='_blank'>CC 3.0 BY</a></div>\n    </footer>\n  )\n}\n","'use strict'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nexport const Intermission = (model) => {\n  let message = (\n    <p>\n      Shutdown underway. <br /> <small>You can safely unplug your Raspberry Pi in {model.countdown} seconds.</small>\n    </p>\n  )\n\n  if (model.reboot) {\n    message = (\n      <p>\n        Reboot underway. <br /> <small>Will refresh in {model.countdown} seconds.</small>\n      </p>\n    )\n  }\n\n  if (model.completed) {\n    <p>\n      Shutdown completed. <br /> <small>You can safely unplug your Raspberry Pi now.</small>\n    </p>\n  }\n\n  return (\n    <div className='waiting'>\n      <div className='message'>{message}</div>\n    </div>\n  )\n}\n","'use strict'\n\nimport './styles/App.css'\n\nimport Inferno from 'inferno' // eslint-disable-line\n\nimport { Tab } from './Tab'\nimport { Header } from './Header'\nimport { Footer } from './Footer'\nimport { Intermission } from './Intermission'\n\nexport const Main = (model) => {\n  let mainContent = ''\n  if (model.reboot || model.shutdown) {\n    mainContent = Intermission(model)\n  } else {\n    mainContent = Tab(model)\n  }\n\n  return (\n    <div className='representation'>\n      <Header />\n      {mainContent}\n      <Footer />\n    </div>\n  )\n}\n","/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug.debug = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting\n    args = exports.formatArgs.apply(self, args);\n\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/[\\\\^$+?.()|[\\]{}]/g, '\\\\$&').replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && 'WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    return exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (typeof process !== 'undefined' && 'env' in process) {\n    return process.env.DEBUG;\n  }\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet){\n  var buffers = [];\n  var packetData = packet.data;\n\n  function _deconstructPacket(data) {\n    if (!data) return data;\n\n    if (isBuf(data)) {\n      var placeholder = { _placeholder: true, num: buffers.length };\n      buffers.push(data);\n      return placeholder;\n    } else if (isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i]);\n      }\n      return newData;\n    } else if ('object' == typeof data && !(data instanceof Date)) {\n      var newData = {};\n      for (var key in data) {\n        newData[key] = _deconstructPacket(data[key]);\n      }\n      return newData;\n    }\n    return data;\n  }\n\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  var curPlaceHolder = 0;\n\n  function _reconstructPacket(data) {\n    if (data && data._placeholder) {\n      var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      return buf;\n    } else if (isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i]);\n      }\n      return data;\n    } else if (data && 'object' == typeof data) {\n      for (var key in data) {\n        data[key] = _reconstructPacket(data[key]);\n      }\n      return data;\n    }\n    return data;\n  }\n\n  packet.data = _reconstructPacket(packet.data);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((global.Blob && obj instanceof Blob) ||\n        (global.File && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar json = require('json3');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n  var str = '';\n  var nsp = false;\n\n  // first is type\n  str += obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    str += obj.attachments;\n    str += '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' != obj.nsp) {\n    nsp = true;\n    str += obj.nsp;\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    if (nsp) {\n      str += ',';\n      nsp = false;\n    }\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    if (nsp) str += ',';\n    str += json.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if ('string' == typeof obj) {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var p = {};\n  var i = 0;\n\n  // look up type\n  p.type = Number(str.charAt(0));\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n    var buf = '';\n    while (str.charAt(++i) != '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) != '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' == str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' == c) break;\n      p.nsp += c;\n      if (i == str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i == str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    p = tryParse(p, str.substr(i));\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(p, str) {\n  try {\n    p.data = json.parse(str);\n  } catch(e){\n    return error();\n  }\n  return p; \n};\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(data){\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug.debug = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting\n    args = exports.formatArgs.apply(self, args);\n\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/[\\\\^$+?.()|[\\]{}]/g, '\\\\$&').replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && 'WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    return exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (typeof process !== 'undefined' && 'env' in process) {\n    return process.env.DEBUG;\n  }\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\r\n * JSON parse.\r\n *\r\n * @see Based on jQuery#parseJSON (MIT) and JSON2\r\n * @api private\r\n */\r\n\r\nvar rvalidchars = /^[\\],:{}\\s]*$/;\r\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\r\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\r\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\r\nvar rtrimLeft = /^\\s+/;\r\nvar rtrimRight = /\\s+$/;\r\n\r\nmodule.exports = function parsejson(data) {\r\n  if ('string' != typeof data || !data) {\r\n    return null;\r\n  }\r\n\r\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\r\n\r\n  // Attempt to parse using the native JSON parser first\r\n  if (global.JSON && JSON.parse) {\r\n    return JSON.parse(data);\r\n  }\r\n\r\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\r\n      .replace(rvalidtokens, ']')\r\n      .replace(rvalidbraces, ''))) {\r\n    return (new Function('return ' + data))();\r\n  }\r\n};","/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","/*! https://mths.be/wtf8 v1.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction wtf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte.\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read the first byte.\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid WTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction wtf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar wtf8 = {\n\t\t'version': '1.0.0',\n\t\t'encode': wtf8encode,\n\t\t'decode': wtf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn wtf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = wtf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in wtf8) {\n\t\t\t\thasOwnProperty.call(wtf8, key) && (freeExports[key] = wtf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.wtf8 = wtf8;\n\t}\n\n}(this));\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('wtf-8');\n\nvar base64encoder;\nif (global && global.ArrayBuffer) {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if ('function' == typeof supportsBinary) {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if ('function' == typeof utf8encode) {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data == 'string') {\n    if (data.charAt(0) == 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data);\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary == 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data != 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data == '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = ''\n    , n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (':' != chr) {\n      length += chr;\n    } else {\n      if ('' == length || (length != (n = Number(length)))) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      msg = data.substr(i + 1, n);\n\n      if (length != msg.length) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      if (msg.length) {\n        packet = exports.decodePacket(msg, binaryType, true);\n\n        if (err.type == packet.type && err.data == packet.data) {\n          // parser error in individual packet - ignoring payload\n          return callback(err, 0, 1);\n        }\n\n        var ret = callback(packet, i + n, l);\n        if (false === ret) return;\n      }\n\n      // advance cursor\n      i += n;\n      length = '';\n    }\n  }\n\n  if (length != '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  var numberTooLong = false;\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] == 255) break;\n\n      if (msgLength.length > 310) {\n        numberTooLong = true;\n        break;\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    if(numberTooLong) return callback(err, 0, 1);\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","export default {};\r\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","\nmodule.exports = require('./lib/index');\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar hasBin = require('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      this.packet({type: parser.CONNECT, query: this.query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  if (packet.nsp !== this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  } else if (opts && 'object' === typeof opts.query) {\n    opts.query = encodeQueryString(opts.query);\n  }\n  return io.socket(parsed.path, opts);\n}\n/**\n *  Helper method to parse query objects to string.\n * @param {object} query\n * @returns {string}\n */\nfunction encodeQueryString (obj) {\n  var str = [];\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\n    }\n  }\n  return str.join('&');\n}\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","'use strict'\n\nimport * as state from './sam/state'\nimport socketio from 'socket.io-client'\n\nconst cb = (event) => {\n  fetch('/model')\n    .then(res => res.json())\n    .then(json => {\n      state.render(state.represent(json))\n    })\n}\n\nif (document.readyState === 'complete' ||\n    (document.readyState !== 'loading' && !document.documentElement.doScroll)) {\n  cb()\n} else {\n  document.addEventListener('DOMContentLoaded', cb)\n}\n\nvar socket = socketio()\nsocket.on('job', function (data) {\n  console.log('got socket.io msg:', data)\n})\n"],"names":["persistState","payload","requestOpts","JSON","stringify","Content-Type","then","res","json","state","catch","err","addNewJob","present","newJob","switchToTab","tabName","tabChange","dismissAlert","model","reboot","shutdown","completeDeviceAction","reload","completed","save","data","mainComponent","Main","display","representation","reprEl","document","getElementById","render","represent","currentState","tools","filter","t","active","map","name","selectedTool","configuration","Date","lastUpdated","toString","alert","result","hasCountdownEnded","stateModel","countdown","isExecutingDeviceAction","nextAction","parse","str","String","length","match","exec","n","parseFloat","type","toLowerCase","y","d","h","m","s","fmtShort","ms","Math","round","fmtLong","plural","floor","ceil","url","uri","loc","obj","global","location","protocol","host","charAt","test","debug","parseuri","port","path","ipv6","indexOf","id","href","short","long","Emitter","mixin","key","prototype","isBuf","Buffer","isBuffer","ArrayBuffer","hasBinary","_hasBinary","Blob","File","isArray","i","toJSON","Object","hasOwnProperty","call","after","count","callback","err_cb","proxy","Error","bail","noop","mapArrayBufferViews","ary","chunk","buffer","buf","byteLength","copy","Uint8Array","set","byteOffset","BlobBuilderConstructor","options","bb","BlobBuilder","append","getBlob","BlobConstructor","Transport","opts","this","hostname","secure","query","timestampParam","timestampRequests","readyState","agent","socket","enablesXDR","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","extraHeaders","localAddress","encode","num","encoded","alphabet","decode","decoded","yeast","now","prev","seed","Polling","forceBase64","hasXHR2","supportsBinary","empty","XHR","requestTimeout","isSSL","xd","xs","Request","method","async","undefined","isBinary","create","unloadHandler","requests","abort","JSONPPolling","callbacks","___eio","index","self","push","msg","onData","j","addEventListener","script","onerror","WS","perMessageDeflate","usingBrowserWebSocket","BrowserWebSocket","WebSocket","NodeWebSocket","polling","xhr","jsonp","xdomain","xscheme","XMLHttpRequest","forceJSONP","JSONP","Socket","parseqs","upgrade","replace","transports","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","threshold","freeGlobal","keys","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","open","clone","o","toArray","list","array","on","ev","fn","destroy","removeListener","Backoff","min","max","factor","jitter","attempts","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","timeout","connecting","lastPing","encoding","packetBuffer","encoder","parser","Encoder","decoder","Decoder","autoConnect","factory","exports","module","define","amd","InfernoDOM","addChildrenToProps","children","props","isNullOrUndefined","isChildrenArray","assign","Array","isStatefulComponent","isStringOrNumber","isString","isNumber","isUndefined","isNull","isInvalidNode","isFunction","isTrue","deepScanChildrenForNode","node","child","getRefInstance$1","instance","_parentComponent","recycle","bp","lifecycle","context","pool","recycledNode","pop","patch","isSVG","dom","unmount","input","parentDom","isVList","unmountVList","isVNode","unmountVNode","vList","removePointer","items","itemsLength","pointer","item","removeChild","shallow","instanceHooks","instanceChildren","hooks","componentWillUnmount","_unmounted","componentToDOMNodeMap","delete","_lastNode","willDetach","VText","text","VPlaceholder","placeholder","VList","createVText","createVPlaceholder","createVList","constructDefaults","string","object","value","split","forEach","isVText","isVPlaceholder","tag","insertOrAppend","newNode","nextNode","appendChild","insertBefore","replaceVListWithNode","replaceNode","documentCreateElement","createElementNS","createElement","appendText","singleChild","createTextNode","textContent","firstChild","textNode","textNode$1","replaceWithNewNode","lastNode","lastInstance","instanceLastNode","mount","nextDom","lastDom","replaceChild","normalise","normaliseChild","remove","innerHTML","recyclingEnabled","removeEvents","events","lastEventKeys","eventKeys","event","getActiveNode","activeElement","removeAllChildren","childrenLength","resetActiveNode","activeNode","body","focus","isKeyed","lastChildren","nextChildren","complex","selectOptionValueIfNeeded","vdom","values","attrs","selected","len","selectValue","i$1","len$1","handleAttachedHooks","created","attached","addListener","setValueProperty","setFormElementProperties","nextTag","inputType","checked","mountVPlaceholder","mountVText","mountVList","mountVNode$1","normalisedInput","vNode","mountVNodeWithoutBlueprint","mountVNodeWithBlueprint","createDocumentFragment","mountArrayChildren","vText","vPlaceholder","handleSelects","mountBlueprintAttrs","attrKeys","newKeys","concat","mountAttributes","mountBlueprintEvents","mountEvents","isComponent","mountComponent","hasHooks","lazy","handleLazyAttached","childrenType","mountChildren","hasAttrs","hasClassName","className","hasStyle","patchStyle","style","hasEvents","mountRef","refValue","refs","parentNode","Component","_patch","_componentToDOMNodeMap","ref","childContext","getChildContext","_parentNode","_pendingSetState","componentWillMount","componentDidMount","node$1","attr","patchAttribute","lastInput","nextInput","nodeValue","patchVList","patchVFragment","patchVText","patchVNode","mountVNode","patchTextNode","patchRef","lastValue","nextValue","patchChildren","patchKeyedChildren","patchNonKeyedChildren","lastChild","lastVNode","nextVNode","skipLazyCheck","lastBp","nextBp","patchVNodeWithoutBlueprint","patchVNodeWithBlueprint","nextHooks","willUpdate","lastTag","lastNodeInstance","instance$1","newDom","patchComponent","lastChildrenType","nextChildrenType","clipData","scrollY","refresh","pending","top","screenHeight","setClipNode","bottom","patchAttributes","patchEvents","nextClassName","removeAttribute","nextStyle","lastStyle","didUpdate","nextHooksDefined","_instance","lastAttrKeys","nextAttrKeys","nextAttrs","lastAttrs","nextAttrsIsUndef","lastAttrsIsNotUndef","nextAttrsKeys","attrKeysLength","lastAttrVal","nextAttrVal","lastAttrsKeys","attrKeysLength$1","attr$1","getRefInstance","lastAttrValue","nextAttrValue","cssText","styleKeys","isUnitlessNumber","styleKeys$1","style$1","value$1","lastStyleKeys","i$2","style$2","lastEvents","nextEvents","_lastEventKeys","_nextEventKeys","nextEventsDefined","lastEventsDefined","nextEventKeys","lastEvent","nextEvent","event$1","attrName","lastHtml","__html","nextHtml","eventData","strictProps","booleanProps","ns","namespaces","removeAttributeNS","setAttributeNS","setAttribute","hasBlueprint","lastProps","nextProps","prevProps","prevState","nextState","_updateComponent","NO_RENDER","componentDidUpdate","shouldUpdate","componentShouldUpdate","componentWillUpdate","nextNode$1","lastVList","nextVList","lastItems","nextItems","parentVList","lastChildrenLength","nextChildrenLength","commonLength","nextChild","lastVFragment","nextVFragment","lastVText","nextVText","nextText","lastEndIndex","nextEndIndex","lastStartIndex","nextStartIndex","lastStartNode","nextStartNode","nextEndNode","lastEndNode","aLength","bLength","sources","moved","removeOffset","lastTarget","removed","k","prevItemsMap","Map","get","pos","seq","lis_algorithm","a","p","slice","u","v","c","Lifecycle","_listeners","scrollX","screenWidth","rect","getBoundingClientRect","left","right","hydrateChild","childNodes","counter","domNode","nodeType","newDomNode","splice","rebuild","rebuild$1","hydrateNode","getChildNodesWithoutComments","rawChildNodes","rawChild","hydrateComponent","isRoot","tagName","hydrate","rootNode","querySelector","documetBody","console","warn","findDOMNode","root","roots","trigger","isBrowser","window","xlinkNS","xmlNS","screen","width","height","lastScrollTime","onscroll","performance","resize","this$1","require$$0","Inferno","isAttrAnEvent$1","VNode","blueprint","createVNode","isAttrAnEvent","isAttrAHook","hook","isAttrAComponentHook","createBlueprint","shape","tagIsDynamic","arg","childrenIsDynamic","attrsIsDynamic","hooksIsDynamic","eventsIsDynamic","keyIsDynamic","styleIsDynamic","classNameIsDynamic","spread","hasSpread","arguments","attrs$1","events$1","hooks$1","_spread","prop","substring","createUniversalElement","createStaticAttributes","setAttrs","setTag","setStyle","setClassName","setChildren","setHooks","setEvents","setKey","universal","Alert","content","success","message","dismissHandler","TabItem","tabInfo","selectedClass","formElements","formEl","alreadyContainsEl","originalValue","CiTabContent","handleCiToolChange","el","currentTarget","parentElement","classList","add","inputEls","getElementsByTagName","required","offsetParent","handleFormSubmit","postData","elements","tool","address","username","apiToken","Job","handleRemoveJob","e","JobsTabContent","handleAddNewJob","jobs","idx","pollrate","NetworkTabContent","handleConnectionTypeChange","wifiConfEl","getElementsByClassName","handleDhcpChange","staticEl","wirelessContainerHidden","connectionType","staticContainerHidden","dhcp","wireless","ssid","hidden","gateway","LedHardwareTabContent","ledType","numLeds","TabContent","displayClass","Tab","tabs","tabContent","Header","supervisorHref","rebootDevice","shutdownDevice","deviceActionsMenu","Footer","Intermission","mainContent","re","parts","src","b","source","authority","ipv6uri","val","isNaN","selectColor","colors","prevColor","namespace","disabled","enabled","curr","prevTime","diff","useColors","color","args","coerce","format","formatter","formatters","formatArgs","apply","logFn","log","bind","enable","skips","RegExp","substr","names","disable","stack","documentElement","firebug","exception","table","navigator","userAgent","parseInt","$1","humanize","lastC","Function","storage","removeItem","load","process","env","DEBUG","localstorage","localStorage","chrome","local","require$$1","r","runInContext","has","undef","isSupported","serialized","stringifySupported","isExtended","Number","getClass","parseSupported","SyntaxError","TypeError","nativeJSON","isProperty","objectProto","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","constructor","members","__proto__","original","parent","Properties","size","valueOf","isConstructor","hasProperty","objectTypes","Escapes","92","34","8","12","10","13","9","leadingZeroes","toPaddedString","unicodePrefix","quote","useCharIndex","symbols","charCode","charCodeAt","serialize","properties","whitespace","indentation","date","time","hours","minutes","seconds","milliseconds","results","element","prefix","join","Index","Source","fromCharCode","Unescapes","47","98","116","110","102","114","lex","begin","position","isSigned","hasMembers","update","walk","isLoader","function","freeExports","previousJSON","isRestored","JSON3","noConflict","_callbacks","once","off","removeAllListeners","removeEventListener","cb","emit","listeners","hasListeners","arr","packet","_deconstructPacket","_placeholder","buffers","newData","packetData","pack","attachments","_reconstructPacket","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","FileReader","onload","bloblessData","readAsArrayBuffer","encodeAsString","nsp","BINARY_EVENT","BINARY_ACK","encodeAsBinary","writeEncoding","deconstruction","binary","deconstructPacket","unshift","removeBlobs","reconstructor","decodeString","types","error","next","tryParse","BinaryReconstructor","reconPack","ERROR","require$$4","require$$3","require$$2","base64","takeBinaryData","finishedReconstruction","binData","reconstructPacket","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","encodeURIComponent","qs","qry","pairs","l","pair","decodeURIComponent","arraybuffer","start","end","bytes","abv","ii","ucs2decode","extra","output","ucs2encode","stringFromCharCode","createByte","codePoint","shift","encodeCodePoint","symbol","wtf8encode","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","wtf8decode","tmp","freeModule","wtf8","version","chars","lookup","encoded1","encoded2","encoded3","encoded4","bufferLength","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","encodeBase64Object","packets","encodeArrayBuffer","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","encodePacket","encodeBlob","dontSendBlobs","blob","tryDecode","utf8","each","done","eachWithIndex","base64encoder","require$$6","require$$5","sliceBuffer","isAndroid","isPhantomJS","close","ping","pong","packetslist","utf8encode","b64","readAsDataURL","b64data","typed","basic","btoa","utf8decode","decodeBase64Packet","asArray","rest","setLengthHeader","encodeOne","doneCallback","encodePayloadAsBlob","encodePayloadAsArrayBuffer","decodePayloadAsBinary","chr","decodePacket","ret","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","numberTooLong","tailArray","msgLength","total","onError","desc","description","doOpen","doClose","onClose","send","write","onOpen","writable","onPacket","hasCORS","XDomainRequest","inherit","responseType","poll","pause","onPause","doPoll","decodePayload","callbackfn","encodePayload","doWrite","schema","sid","request","req","sendXhr","pollXhr","setDisableHeaderCheck","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","onreadystatechange","status","setTimeout","requestsCount","onSuccess","cleanup","fromError","contentType","getResponseHeader","response","ui8Arr","dataArray","attachEvent","rNewline","rEscapedNewline","form","iframe","insertAt","head","isUAgecko","complete","initIframe","html","iframeId","area","target","action","submit","MozWebSocket","check","protocols","headers","ws","supports","addEventListeners","onopen","onclose","onmessage","compress","websocket","require$$8","require$$7","parsejson","priorWebsocketSuccess","createTransport","EIO","transport","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","failed","upgrading","flush","freezeTransport","onTransportClose","onupgrade","to","onHandshake","setPing","code","filterUpgrades","onHeartbeat","clearTimeout","sendPacket","cleanupAndClose","waitForUpgrade","reason","filteredUpgrades","io","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","hasBin","connect","connect_error","connect_timeout","disconnect","reconnect","reconnect_attempt","reconnect_failed","reconnect_error","reconnecting","subEvents","parserType","EVENT","flags","CONNECT","onpacket","onconnect","onevent","ACK","onack","DISCONNECT","ondisconnect","ack","sent","emitBuffered","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","eio","emitAll","updateSocketIds","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","skipReconnect","openSub","errorSub","timer","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","subsLength","sub","delay","onreconnect","attempt","parsed","sameNamespace","cache","newConnection","forceNew","multiplex","encodeQueryString","doScroll","socketio"],"mappings":"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"}